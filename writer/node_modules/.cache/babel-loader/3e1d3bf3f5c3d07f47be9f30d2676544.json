{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Axios from \"./config\";\n\nfunction UpdateToken(_x) {\n  return _UpdateToken.apply(this, arguments);\n}\n\n_c2 = UpdateToken;\n\nfunction _UpdateToken() {\n  _UpdateToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(refreshToken) {\n    var endPoint, result, _result$data$tokens, accessToken, _refreshToken, ta, tr;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            endPoint = 'refreshToken?refreshToken=' + refreshToken;\n            _context.next = 4;\n            return Axios.post(endPoint);\n\n          case 4:\n            result = _context.sent;\n\n            if (!(result.data == false)) {\n              _context.next = 9;\n              break;\n            }\n\n            window.location.href = \"/#/login\";\n            _context.next = 16;\n            break;\n\n          case 9:\n            if (!(result.data.type === \"writer\")) {\n              _context.next = 16;\n              break;\n            }\n\n            _result$data$tokens = result.data.tokens, accessToken = _result$data$tokens.accessToken, _refreshToken = _result$data$tokens.refreshToken;\n            ta = accessToken;\n            tr = _refreshToken;\n            localStorage.setItem('wat', ta);\n            localStorage.setItem('wtr', tr);\n            return _context.abrupt(\"return\", true);\n\n          case 16:\n            _context.next = 21;\n            break;\n\n          case 18:\n            _context.prev = 18;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 18]]);\n  }));\n  return _UpdateToken.apply(this, arguments);\n}\n\n_c = UpdateToken;\n\nfunction requestRefreshToken(_x2, _x3) {\n  return _requestRefreshToken.apply(this, arguments);\n}\n/*async function verifyAccessToken(accessToken,Profile){\n\n   try {\n          \n           const endPoint ='veryAccessToken?accessToken='+accessToken;\n           const result = await Axios.post(endPoint);\n           console.log(result)\n\n           if(result.data.success !==undefined && result.data.success == true){\n            if(result.data.type === \"writer\"){\n          \n              const { accessToken,refreshToken } = result.data.tokens;\n                \n              const ta=accessToken;\n              const tr=refreshToken;\n             // console.log(result.data.tokens);\n              \n              localStorage.setItem('wat',ta);\n              localStorage.setItem('wtr',tr);\n  \n  \n              Profile(result.data.data);\n               return result.data.success;\n            }\n          }else{ return false;}\n\n\n          \n   } catch (error) {\n         console.log(error)\n  }\n\n}*/\n\n\nfunction _requestRefreshToken() {\n  _requestRefreshToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(refreshToken, Profile) {\n    var endPoint, result, _result$data$tokens2, accessToken, _refreshToken2, ta, tr;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            endPoint = 'refreshToken?refreshToken=' + refreshToken;\n            _context2.next = 4;\n            return Axios.post(endPoint);\n\n          case 4:\n            result = _context2.sent;\n\n            if (!(result.data == false)) {\n              _context2.next = 9;\n              break;\n            }\n\n            window.location.href = \"/#/login\";\n            _context2.next = 17;\n            break;\n\n          case 9:\n            if (!(result.data.type === \"writer\")) {\n              _context2.next = 17;\n              break;\n            }\n\n            _result$data$tokens2 = result.data.tokens, accessToken = _result$data$tokens2.accessToken, _refreshToken2 = _result$data$tokens2.refreshToken;\n            ta = accessToken;\n            tr = _refreshToken2;\n            localStorage.setItem('wat', ta);\n            localStorage.setItem('wtr', tr); // localStorage.setItem('gh',tr);\n\n            Profile(result.data.data);\n            return _context2.abrupt(\"return\", true);\n\n          case 17:\n            _context2.next = 22;\n            break;\n\n          case 19:\n            _context2.prev = 19;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n\n          case 22:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 19]]);\n  }));\n  return _requestRefreshToken.apply(this, arguments);\n}\n\nfunction veryAccessTokens(_x4, _x5) {\n  return _veryAccessTokens.apply(this, arguments);\n}\n\nfunction _veryAccessTokens() {\n  _veryAccessTokens = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(accessToken, Profile) {\n    var endPoint, result;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            endPoint = 'veryAccessToken?accessToken=' + accessToken;\n            _context3.next = 4;\n            return Axios.post(endPoint);\n\n          case 4:\n            result = _context3.sent;\n\n            if (!(result.data.success !== undefined && result.data.success == true)) {\n              _context3.next = 11;\n              break;\n            }\n\n            if (!(result.data.user.type === \"writer\")) {\n              _context3.next = 9;\n              break;\n            }\n\n            Profile(result.data.user);\n            return _context3.abrupt(\"return\", result.data.user);\n\n          case 9:\n            _context3.next = 12;\n            break;\n\n          case 11:\n            return _context3.abrupt(\"return\", false);\n\n          case 12:\n            _context3.next = 17;\n            break;\n\n          case 14:\n            _context3.prev = 14;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log(_context3.t0);\n\n          case 17:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 14]]);\n  }));\n  return _veryAccessTokens.apply(this, arguments);\n}\n\nvar Tokens = function Tokens() {\n  var refreshToken = localStorage.getItem('wat');\n  var accessToken = localStorage.getItem('wtr'); //alert(accessToken)\n\n  return {\n    accessToken: accessToken,\n    refreshToken: refreshToken\n  };\n};\n\n_c3 = Tokens;\nexport { requestRefreshToken, Tokens, veryAccessTokens, UpdateToken };\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"UpdateToken\");\n$RefreshReg$(_c2, \"UpdateToken\");\n$RefreshReg$(_c3, \"Tokens\");","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/writer/src/Api/authThenticateToken.js"],"names":["Axios","UpdateToken","refreshToken","endPoint","post","result","data","window","location","href","type","tokens","accessToken","ta","tr","localStorage","setItem","console","log","requestRefreshToken","Profile","veryAccessTokens","success","undefined","user","Tokens","getItem"],"mappings":"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","sourcesContent":["import Axios from \"./config\";\nasync function UpdateToken(refreshToken){\n    try {\n        const endPoint ='refreshToken?refreshToken='+refreshToken;\n       \n        const result = await Axios.post(endPoint);\n        \n        if(result.data == false){\n          \n         window.location.href=\"/#/login\";\n        }else{\n           \n            if(result.data.type === \"writer\" ){\n                \n                const { accessToken,refreshToken } = result.data.tokens;\n                \n                const ta=accessToken;\n                const tr=refreshToken;\n                \n                \n                localStorage.setItem('wat',ta);\n                localStorage.setItem('wtr',tr);\n               \n                return true;\n            }\n            //console.log(result.data)\n            \n        }\n    } catch (error) {\n        console.log(error);\n    } \n}\n\nasync function requestRefreshToken(refreshToken,Profile){\n    try {\n        const endPoint ='refreshToken?refreshToken='+refreshToken;\n       \n        const result = await Axios.post(endPoint);\n        \n        if(result.data == false){\n          \n         window.location.href=\"/#/login\";\n        }else{\n           \n            if(result.data.type === \"writer\" ){\n                \n                const { accessToken,refreshToken } = result.data.tokens;\n                \n                const ta=accessToken;\n                const tr=refreshToken;\n                \n                \n                localStorage.setItem('wat',ta);\n                localStorage.setItem('wtr',tr);\n               // localStorage.setItem('gh',tr);\n               \n                Profile(result.data.data);\n                return true;\n            }\n            //console.log(result.data)\n            \n        }\n    } catch (error) {\n        console.log(error);\n    }\n   \n}\n/*async function verifyAccessToken(accessToken,Profile){\n\n   try {\n          \n           const endPoint ='veryAccessToken?accessToken='+accessToken;\n           const result = await Axios.post(endPoint);\n           console.log(result)\n\n           if(result.data.success !==undefined && result.data.success == true){\n            if(result.data.type === \"writer\"){\n          \n              const { accessToken,refreshToken } = result.data.tokens;\n                \n              const ta=accessToken;\n              const tr=refreshToken;\n             // console.log(result.data.tokens);\n              \n              localStorage.setItem('wat',ta);\n              localStorage.setItem('wtr',tr);\n  \n  \n              Profile(result.data.data);\n               return result.data.success;\n            }\n          }else{ return false;}\n\n\n          \n   } catch (error) {\n         console.log(error)\n  }\n\n}*/\n\nasync function veryAccessTokens(accessToken,Profile){\n    try {\n          \n        const endPoint ='veryAccessToken?accessToken='+accessToken;\n        const result = await Axios.post(endPoint);\n      //  console.log(result)\n\n        if(result.data.success !==undefined && result.data.success == true){\n         if(result.data.user.type === \"writer\"){\n           \n           \n\n\n            Profile(result.data.user);\n            return result.data.user;\n         }\n       }else{ return false;}\n\n\n       \n} catch (error) {\n      console.log(error)\n}\n}\n\n\n\nconst Tokens = function(){\n    const refreshToken = localStorage.getItem('wat');\n    const accessToken = localStorage.getItem('wtr');\n\n    //alert(accessToken)\n\n    return {accessToken,refreshToken};\n}\n\nexport {requestRefreshToken,Tokens,veryAccessTokens,UpdateToken}"]},"metadata":{},"sourceType":"module"}