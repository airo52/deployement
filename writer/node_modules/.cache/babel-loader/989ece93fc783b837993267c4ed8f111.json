{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/tony/Documents/Projects/react/Writer/writer/src/views/pages/activate/ConfirmPayment.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport '../login/login.css';\nimport swal from \"sweetalert\";\nimport Loader from 'react-loader-spinner';\nimport ApiRequest from 'src/Api/Requests/Apirequest';\nimport { useEffect, useState } from 'react';\nimport { UrlParams } from 'src/Api/auth/UrlParams';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar ConfirmPayment = function ConfirmPayment() {\n  _s();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      Key = _useState2[0],\n      setKey = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      save = _useState4[0],\n      SetSave = _useState4[1];\n\n  var sendConfirmationRequest = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return ApiRequest.sendPaymentConfirmation(Key);\n\n            case 2:\n              result = _context.sent;\n\n              if (result.data === \"Payment confirmed \") {\n                swal('success', 'payment confirmed', 'success');\n                setTimeout(function () {\n                  window.location.href = \"/#/\";\n                }, 2000);\n              } else {\n                swal('error', result.data, 'error');\n              }\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function sendConfirmationRequest() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var key = UrlParams('Key');\n    setTimeout(function () {\n      if (key == false) {\n        swal('error', 'process failed', 'error');\n        setTimeout(function () {\n          window.location.href = \"/#/\";\n        }, 1000);\n      } else {\n        setKey(key);\n        setTimeout(function () {\n          sendConfirmationRequest();\n        }, 1000);\n      }\n    }, 2000);\n    SetSave(true);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: save && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner\",\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"Circles\",\n        color: \"#00BFFF\",\n        height: 100,\n        width: 100 //3 secs\n\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 18\n    }, _this)\n  }, void 0, false);\n};\n\n_s(ConfirmPayment, \"18pstjxo/1Wp4ayV22OkHb57vSk=\");\n\n_c = ConfirmPayment;\nexport default ConfirmPayment;\n\nvar _c;\n\n$RefreshReg$(_c, \"ConfirmPayment\");","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/writer/src/views/pages/activate/ConfirmPayment.js"],"names":["swal","Loader","ApiRequest","useEffect","useState","UrlParams","ConfirmPayment","Key","setKey","save","SetSave","sendConfirmationRequest","sendPaymentConfirmation","result","data","setTimeout","window","location","href","key"],"mappings":";;;;;;;;AAAA,OAAO,oBAAP;AACA,OAAOA,IAAP,MAAiB,YAAjB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,SAAT,QAA0B,wBAA1B;;;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAI;AAAA;;AACvB,kBAAqBF,QAAQ,CAAC,EAAD,CAA7B;AAAA;AAAA,MAAOG,GAAP;AAAA,MAAWC,MAAX;;AAEA,mBAAuBJ,QAAQ,CAAC,KAAD,CAA/B;AAAA;AAAA,MAAOK,IAAP;AAAA,MAAYC,OAAZ;;AAEA,MAAMC,uBAAuB;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAERT,UAAU,CAACU,uBAAX,CAAmCL,GAAnC,CAFQ;;AAAA;AAEvBM,cAAAA,MAFuB;;AAG7B,kBAAGA,MAAM,CAACC,IAAP,KAAgB,oBAAnB,EAAwC;AACpCd,gBAAAA,IAAI,CAAC,SAAD,EAAW,mBAAX,EAA+B,SAA/B,CAAJ;AACAe,gBAAAA,UAAU,CAAC,YAAI;AACdC,kBAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,KAArB;AACJ,iBAFa,EAEZ,IAFY,CAAV;AAGH,eALD,MAKM;AACFlB,gBAAAA,IAAI,CAAC,OAAD,EAASa,MAAM,CAACC,IAAhB,EAAqB,OAArB,CAAJ;AACH;;AAV4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAvBH,uBAAuB;AAAA;AAAA;AAAA,KAA7B;;AAgBAR,EAAAA,SAAS,CAAC,YAAI;AACV,QAAMgB,GAAG,GAAGd,SAAS,CAAC,KAAD,CAArB;AACAU,IAAAA,UAAU,CAAC,YAAM;AACV,UAAGI,GAAG,IAAI,KAAV,EAAgB;AACbnB,QAAAA,IAAI,CAAC,OAAD,EAAS,gBAAT,EAA0B,OAA1B,CAAJ;AACAe,QAAAA,UAAU,CAAC,YAAI;AACVC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,KAArB;AACJ,SAFS,EAER,IAFQ,CAAV;AAGF,OALD,MAKK;AACDV,QAAAA,MAAM,CAACW,GAAD,CAAN;AACAJ,QAAAA,UAAU,CAAC,YAAI;AACdJ,UAAAA,uBAAuB;AAC3B,SAFa,EAEZ,IAFY,CAAV;AAIH;AACP,KAbS,EAaP,IAbO,CAAV;AAcAD,IAAAA,OAAO,CAAC,IAAD,CAAP;AACH,GAjBQ,EAiBP,EAjBO,CAAT;AAkBA,sBAAO;AAAA,cACFD,IAAI,iBAAI;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA,6BAGb,QAAC,MAAD;AACF,QAAA,IAAI,EAAC,SADH;AAEF,QAAA,KAAK,EAAC,SAFJ;AAGF,QAAA,MAAM,EAAE,GAHN;AAIF,QAAA,KAAK,EAAE,GAJL,CAKF;;AALE;AAAA;AAAA;AAAA;AAAA;AAHa;AAAA;AAAA;AAAA;AAAA;AADN,mBAAP;AAcH,CArDD;;GAAMH,c;;KAAAA,c;AAuDN,eAAeA,cAAf","sourcesContent":["import '../login/login.css';\nimport swal from \"sweetalert\";\nimport Loader from 'react-loader-spinner';\nimport ApiRequest from 'src/Api/Requests/Apirequest';\nimport { useEffect, useState } from 'react';\nimport { UrlParams } from 'src/Api/auth/UrlParams';\n\nconst ConfirmPayment = ()=>{\n    const [Key,setKey] = useState('');\n   \n    const [save,SetSave] = useState(false);\n\n    const sendConfirmationRequest = async()=>{\n       // Payment confirmed     \n       const result = await ApiRequest.sendPaymentConfirmation(Key);\n       if(result.data === \"Payment confirmed \"){\n           swal('success','payment confirmed','success');\n           setTimeout(()=>{\n            window.location.href=\"/#/\";\n       },2000) \n       } else{\n           swal('error',result.data,'error');\n       }\n\n\n\n    }\n\n    useEffect(()=>{\n        const key = UrlParams('Key');\n        setTimeout(() => {\n               if(key == false){\n                  swal('error','process failed','error');\n                  setTimeout(()=>{\n                       window.location.href=\"/#/\";\n                  },1000) \n               }else{\n                   setKey(key);\n                   setTimeout(()=>{\n                    sendConfirmationRequest();\n               },1000) \n                   \n               }\n        }, 2000);\n        SetSave(true);\n    },[])\n    return <>\n       { save && <div className=\"spinner\">\n    \n  \n    <Loader\n  type=\"Circles\"\n  color=\"#00BFFF\"\n  height={100}\n  width={100}\n  //3 secs\n  />\n  </div>\n}\n    </>\n}\n\nexport default ConfirmPayment;"]},"metadata":{},"sourceType":"module"}