{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Axios from\"../config\";function validateEmail(email){var re=/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());}function validateLogin(email,password){if(email!==\"\"){if(validateEmail(email)){if(password!==\"\"){return true;}else{return\"password is required\";}}else{return\"wrong email format\";}}else{return\"email is required\";}}var Loginn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password,Profile){var res,data,endPoint,result,_result$data$tokens,accessToken,refreshToken,ta,tr;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;res=validateLogin(email,password);if(!(res==true)){_context.next=22;break;}data=\"password=\"+password+\"&email=\"+email;endPoint=\"Login?\".concat(data);// console.log(endPoint)\n_context.next=7;return Axios.post(endPoint);case 7:result=_context.sent;if(!(result.data.success!==undefined&&result.data.success==true)){_context.next=19;break;}if(!(result.data.type===\"writer\")){_context.next=17;break;}_result$data$tokens=result.data.tokens,accessToken=_result$data$tokens.accessToken,refreshToken=_result$data$tokens.refreshToken;ta=accessToken;tr=refreshToken;localStorage.setItem('wat',ta);localStorage.setItem('wtr',tr);//localStorage.setItem('if',JSON.stringify(result.data.data));\nProfile(result.data.data);return _context.abrupt(\"return\",result.data.success);case 17:_context.next=20;break;case 19:return _context.abrupt(\"return\",result.data);case 20:_context.next=23;break;case 22:return _context.abrupt(\"return\",res);case 23:_context.next=28;break;case 25:_context.prev=25;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 28:case\"end\":return _context.stop();}}},_callee,null,[[0,25]]);}));return function Loginn(_x,_x2,_x3){return _ref.apply(this,arguments);};}();var Activate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(Key){var key,endPoint,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:key=parseInt(Key);endPoint=\"/writer/api/c2/activate/\".concat(key);_context2.next=4;return Axios.post(endPoint);case 4:result=_context2.sent;return _context2.abrupt(\"return\",result.data);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function Activate(_x4){return _ref2.apply(this,arguments);};}();var Logout=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var accessToken,refreshToken,endPoint,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:accessToken=localStorage.getItem('wat');refreshToken=localStorage.getItem('wtr');endPoint=\"Logout/\".concat(refreshToken);_context3.next=5;return Axios.post(endPoint);case 5:result=_context3.sent;if(result.data==true){localStorage.clear();window.location.reload();}//  localStorage.setItem('ta',ta);\n// localStorage.setItem('tr',tr);\ncase 7:case\"end\":return _context3.stop();}}},_callee3);}));return function Logout(){return _ref3.apply(this,arguments);};}();export{Loginn,Logout,Activate};","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/writer/src/Api/auth/auth.js"],"names":["Axios","validateEmail","email","re","test","String","toLowerCase","validateLogin","password","Loginn","Profile","res","data","endPoint","post","result","success","undefined","type","tokens","accessToken","refreshToken","ta","tr","localStorage","setItem","console","log","Activate","Key","key","parseInt","Logout","getItem","clear","window","location","reload"],"mappings":"+UAAA,MAAOA,CAAAA,KAAP,KAAkB,WAAlB,CAEA,QAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA6B,CACzB,GAAMC,CAAAA,EAAE,CAAG,uJAAX,CACA,MAAOA,CAAAA,EAAE,CAACC,IAAH,CAAQC,MAAM,CAACH,KAAD,CAAN,CAAcI,WAAd,EAAR,CAAP,CACH,CACD,QAASC,CAAAA,aAAT,CAAwBL,KAAxB,CAA8BM,QAA9B,CAAuC,CACnC,GAAGN,KAAK,GAAI,EAAZ,CAAe,CACX,GAAGD,aAAa,CAACC,KAAD,CAAhB,CAAwB,CACpB,GAAGM,QAAQ,GAAI,EAAf,CAAkB,CACZ,MAAO,KAAP,CACL,CAFD,IAEK,CAAC,MAAO,sBAAP,CAA8B,CACvC,CAJD,IAIK,CAAE,MAAO,oBAAP,CAA4B,CACtC,CAND,IAMK,CAAE,MAAO,mBAAP,CAA2B,CACpC,CAED,GAAMC,CAAAA,MAAM,0FAAG,iBAAOP,KAAP,CAAaM,QAAb,CAAsBE,OAAtB,kNAEHC,GAFG,CAEGJ,aAAa,CAACL,KAAD,CAAOM,QAAP,CAFhB,MAGJG,GAAG,EAAI,IAHH,2BAIAC,IAJA,CAIO,YAAYJ,QAAZ,CAAqB,SAArB,CAA+BN,KAJtC,CAKFW,QALE,iBAKiBD,IALjB,EAOT;AAPS,sBASYZ,CAAAA,KAAK,CAACc,IAAN,CAAWD,QAAX,CATZ,QASHE,MATG,oBAWNA,MAAM,CAACH,IAAP,CAAYI,OAAZ,GAAuBC,SAAvB,EAAoCF,MAAM,CAACH,IAAP,CAAYI,OAAZ,EAAuB,IAXrD,gCAYHD,MAAM,CAACH,IAAP,CAAYM,IAAZ,GAAqB,QAZlB,+CAciCH,MAAM,CAACH,IAAP,CAAYO,MAd7C,CAcIC,WAdJ,qBAcIA,WAdJ,CAcgBC,YAdhB,qBAcgBA,YAdhB,CAgBEC,EAhBF,CAgBKF,WAhBL,CAiBEG,EAjBF,CAiBKF,YAjBL,CAmBJG,YAAY,CAACC,OAAb,CAAqB,KAArB,CAA2BH,EAA3B,EACAE,YAAY,CAACC,OAAb,CAAqB,KAArB,CAA2BF,EAA3B,EACA;AAGAb,OAAO,CAACK,MAAM,CAACH,IAAP,CAAYA,IAAb,CAAP,CAxBI,gCAyBGG,MAAM,CAACH,IAAP,CAAYI,OAzBf,yEA6BMD,MAAM,CAACH,IA7Bb,yEAkCGD,GAlCH,2FAqCPe,OAAO,CAACC,GAAR,cArCO,qEAAH,kBAANlB,CAAAA,MAAM,oDAAZ,CAyCD,GAAMmB,CAAAA,QAAQ,2FAAG,kBAAOC,GAAP,8IACPC,GADO,CACDC,QAAQ,CAACF,GAAD,CADP,CAIPhB,QAJO,mCAI8BiB,GAJ9B,yBAMQ9B,CAAAA,KAAK,CAACc,IAAN,CAAWD,QAAX,CANR,QAMPE,MANO,iDAQNA,MAAM,CAACH,IARD,0DAAH,kBAARgB,CAAAA,QAAQ,8CAAd,CAYA,GAAMI,CAAAA,MAAM,2FAAG,qLACLZ,WADK,CACSI,YAAY,CAACS,OAAb,CAAqB,KAArB,CADT,CAELZ,YAFK,CAEUG,YAAY,CAACS,OAAb,CAAqB,KAArB,CAFV,CAIJpB,QAJI,kBAIiBQ,YAJjB,yBAMWrB,CAAAA,KAAK,CAACc,IAAN,CAAWD,QAAX,CANX,QAMJE,MANI,gBAQV,GAAGA,MAAM,CAACH,IAAP,EAAe,IAAlB,CAAuB,CAEnBY,YAAY,CAACU,KAAb,GACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACH,CACJ;AACC;AAdY,wDAAH,kBAANL,CAAAA,MAAM,2CAAZ,CAiBA,OACIvB,MADJ,CAEIuB,MAFJ,CAGIJ,QAHJ","sourcesContent":["import Axios from \"../config\";\n\nfunction validateEmail(email){\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n}\nfunction validateLogin (email,password){\n    if(email !==\"\"){\n        if(validateEmail(email)){\n            if(password !==\"\"){\n                  return true;\n            }else{return \"password is required\"}\n        }else{ return \"wrong email format\"}\n    }else{ return \"email is required\"}\n }\n\n const Loginn = async (email,password,Profile)=>{\n    try {\n         var res = validateLogin(email,password);\n         if(res == true){\n            var data = \"password=\"+password+\"&email=\"+email\n        const endPoint =`Login?${data}`;\n\n       // console.log(endPoint)\n       \n       const result = await Axios.post(endPoint);\n       \n       if(result.data.success !==undefined && result.data.success == true){\n          if(result.data.type === \"writer\"){\n              \n            const { accessToken,refreshToken } = result.data.tokens;\n            \n            const ta=accessToken;\n            const tr=refreshToken;\n            \n            localStorage.setItem('wat',ta);\n            localStorage.setItem('wtr',tr);\n            //localStorage.setItem('if',JSON.stringify(result.data.data));\n\n\n            Profile(result.data.data);\n            return(result.data.success);\n            //window.location.href=\"/#/home\";\n\n          }\n        }else{ return result.data;}\n      \n                  // return false;\n       // return result.data;\n        }else{\n            return res;\n        }\n   } catch (error) {\n         console.log(error)\n   }\n}\n\nconst Activate = async (Key)=>{\n    const key = parseInt(Key);\n   \n\n    const endPoint =`/writer/api/c2/activate/${key}`;\n\n    const result = await Axios.post(endPoint);\n   \n    return result.data;\n\n}\n\nconst Logout = async ()=>{\n    const accessToken = localStorage.getItem('wat');\n    const refreshToken = localStorage.getItem('wtr');\n\n     const endPoint = `Logout/${refreshToken}`;\n\n     const result = await Axios.post(endPoint);\n      \n     if(result.data == true){\n        \n         localStorage.clear();\n         window.location.reload();\n     }\n  //  localStorage.setItem('ta',ta);\n   // localStorage.setItem('tr',tr);\n}\n\nexport {\n    Loginn,\n    Logout,\n    Activate\n}"]},"metadata":{},"sourceType":"module"}