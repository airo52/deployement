{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'../login/login.css';import swal from\"sweetalert\";import Loader from'react-loader-spinner';import ApiRequest from'src/Api/Requests/Apirequest';import{useEffect,useState}from'react';import{UrlParams}from'src/Api/auth/UrlParams';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ConfirmPayment=function ConfirmPayment(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),Key=_useState2[0],setKey=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),save=_useState4[0],SetSave=_useState4[1];var sendConfirmationRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ApiRequest.sendPaymentConfirmation(key);case 2:result=_context.sent;if(result.data===\"Payment confirmed \"){swal('success','payment confirmed','success');setTimeout(function(){window.location.href=\"/#/\";},2000);}else{swal('error',result.data,'error');setTimeout(function(){window.location.href=\"/#/\";},2000);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function sendConfirmationRequest(_x){return _ref.apply(this,arguments);};}();useEffect(function(){var key=UrlParams('Key');setTimeout(function(){if(key==false){swal('error','process failed','error');setTimeout(function(){window.location.href=\"/#/\";},1000);}else{//setKey(key);\nsetTimeout(function(){sendConfirmationRequest(key);},1000);}},2000);SetSave(true);},[]);return/*#__PURE__*/_jsx(_Fragment,{children:save&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",children:/*#__PURE__*/_jsx(Loader,{type:\"Circles\",color:\"#00BFFF\",height:100,width:100//3 secs\n})})});};export default ConfirmPayment;","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/writer/src/views/pages/activate/ConfirmPayment.js"],"names":["swal","Loader","ApiRequest","useEffect","useState","UrlParams","ConfirmPayment","Key","setKey","save","SetSave","sendConfirmationRequest","key","sendPaymentConfirmation","result","data","setTimeout","window","location","href"],"mappings":"wfAAA,MAAO,oBAAP,CACA,MAAOA,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,6BAAvB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,SAAT,KAA0B,wBAA1B,C,gGAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAI,CACvB,cAAqBF,QAAQ,CAAC,EAAD,CAA7B,wCAAOG,GAAP,eAAWC,MAAX,eAEA,eAAuBJ,QAAQ,CAAC,KAAD,CAA/B,yCAAOK,IAAP,eAAYC,OAAZ,eAEA,GAAMC,CAAAA,uBAAuB,0FAAG,iBAAMC,GAAN,mJAERV,CAAAA,UAAU,CAACW,uBAAX,CAAmCD,GAAnC,CAFQ,QAEvBE,MAFuB,eAI7B,GAAGA,MAAM,CAACC,IAAP,GAAgB,oBAAnB,CAAwC,CACpCf,IAAI,CAAC,SAAD,CAAW,mBAAX,CAA+B,SAA/B,CAAJ,CACAgB,UAAU,CAAC,UAAI,CACdC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,KAArB,CACJ,CAFa,CAEZ,IAFY,CAAV,CAGH,CALD,IAKM,CACFnB,IAAI,CAAC,OAAD,CAASc,MAAM,CAACC,IAAhB,CAAqB,OAArB,CAAJ,CACAC,UAAU,CAAC,UAAI,CACdC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,KAArB,CACJ,CAFa,CAEZ,IAFY,CAAV,CAGH,CAd4B,sDAAH,kBAAvBR,CAAAA,uBAAuB,4CAA7B,CAoBAR,SAAS,CAAC,UAAI,CACV,GAAMS,CAAAA,GAAG,CAAGP,SAAS,CAAC,KAAD,CAArB,CACAW,UAAU,CAAC,UAAM,CACV,GAAGJ,GAAG,EAAI,KAAV,CAAgB,CACbZ,IAAI,CAAC,OAAD,CAAS,gBAAT,CAA0B,OAA1B,CAAJ,CACAgB,UAAU,CAAC,UAAI,CACVC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,KAArB,CACJ,CAFS,CAER,IAFQ,CAAV,CAGF,CALD,IAKK,CACD;AACAH,UAAU,CAAC,UAAI,CACdL,uBAAuB,CAACC,GAAD,CAAvB,CACJ,CAFa,CAEZ,IAFY,CAAV,CAIH,CACP,CAbS,CAaP,IAbO,CAAV,CAcAF,OAAO,CAAC,IAAD,CAAP,CACH,CAjBQ,CAiBP,EAjBO,CAAT,CAkBA,mBAAO,yBACFD,IAAI,eAAI,YAAK,SAAS,CAAC,SAAf,uBAGb,KAAC,MAAD,EACF,IAAI,CAAC,SADH,CAEF,KAAK,CAAC,SAFJ,CAGF,MAAM,CAAE,GAHN,CAIF,KAAK,CAAE,GACP;AALE,EAHa,EADN,EAAP,CAcH,CAzDD,CA2DA,cAAeH,CAAAA,cAAf","sourcesContent":["import '../login/login.css';\nimport swal from \"sweetalert\";\nimport Loader from 'react-loader-spinner';\nimport ApiRequest from 'src/Api/Requests/Apirequest';\nimport { useEffect, useState } from 'react';\nimport { UrlParams } from 'src/Api/auth/UrlParams';\n\nconst ConfirmPayment = ()=>{\n    const [Key,setKey] = useState('');\n   \n    const [save,SetSave] = useState(false);\n\n    const sendConfirmationRequest = async(key)=>{\n       // Payment confirmed     \n       const result = await ApiRequest.sendPaymentConfirmation(key);\n       \n       if(result.data === \"Payment confirmed \"){\n           swal('success','payment confirmed','success');\n           setTimeout(()=>{\n            window.location.href=\"/#/\";\n       },2000) \n       } else{\n           swal('error',result.data,'error');\n           setTimeout(()=>{\n            window.location.href=\"/#/\";\n       },2000) \n       }\n\n\n\n    }\n\n    useEffect(()=>{\n        const key = UrlParams('Key');\n        setTimeout(() => {\n               if(key == false){\n                  swal('error','process failed','error');\n                  setTimeout(()=>{\n                       window.location.href=\"/#/\";\n                  },1000) \n               }else{\n                   //setKey(key);\n                   setTimeout(()=>{\n                    sendConfirmationRequest(key);\n               },1000) \n                   \n               }\n        }, 2000);\n        SetSave(true);\n    },[])\n    return <>\n       { save && <div className=\"spinner\">\n    \n  \n    <Loader\n  type=\"Circles\"\n  color=\"#00BFFF\"\n  height={100}\n  width={100}\n  //3 secs\n  />\n  </div>\n}\n    </>\n}\n\nexport default ConfirmPayment;"]},"metadata":{},"sourceType":"module"}