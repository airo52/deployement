{"ast":null,"code":"import _objectSpread from\"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/tony/Documents/Projects/react/Writer/writer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Suspense,useEffect,useState}from'react';import io from'socket.io-client';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Urls from'src/Api/urls';import{Redirect,Route,Switch}from'react-router-dom';import{CContainer,CFade}from'@coreui/react';// routes config\nimport routes from'../routes';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loading=/*#__PURE__*/_jsx(\"div\",{className:\"pt-3 text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sk-spinner sk-spinner-pulse\"})});var socket=io(Urls.baseUrl,{transports:['websocket']});var TheContent=function TheContent(_ref){var email=_ref.email,name=_ref.name,notificationCount=_ref.notificationCount,Messages=_ref.Messages,setSocket=_ref.setSocket;var ENDPOINT='localhost:4000';var notify=function notify(data){return toast(data);};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),click=_useState2[0],setClick=_useState2[1];useEffect(function(){//  socket = io.connect(ENDPOINT);\nsetSocket(socket);var room=email;localStorage.setItem('mail',room);socket.emit('joins',{name:name,room:room},function(){});setSocket(socket);socket.on('newNotification',function(notification){notificationCount(notification[0].count);Messages(notification[0].data);setTimeout(function(){setClick(true);notify(notification[0].count+\" New Notifications\");},2000);// console.log(notification);\n});},[ENDPOINT]);return/*#__PURE__*/_jsxs(\"main\",{className:\"c-main\",children:[/*#__PURE__*/_jsx(CContainer,{fluid:true,children:/*#__PURE__*/_jsx(Suspense,{fallback:loading,children:/*#__PURE__*/_jsxs(Switch,{children:[routes.map(function(route,idx){return route.component&&/*#__PURE__*/_jsx(Route,{path:route.path,exact:route.exact,name:route.name,render:function render(props){return/*#__PURE__*/_jsx(CFade,{children:/*#__PURE__*/_jsx(route.component,_objectSpread({socket:socket},props))});}},idx);}),/*#__PURE__*/_jsx(Redirect,{from:\"/\",to:\"/dashboard\"})]})})}),/*#__PURE__*/_jsx(ToastContainer,{})]});};export default/*#__PURE__*/React.memo(TheContent);","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/writer/src/containers/TheContent.js"],"names":["React","Suspense","useEffect","useState","io","ToastContainer","toast","Urls","Redirect","Route","Switch","CContainer","CFade","routes","loading","socket","baseUrl","transports","TheContent","email","name","notificationCount","Messages","setSocket","ENDPOINT","notify","data","click","setClick","room","localStorage","setItem","emit","on","notification","count","setTimeout","map","route","idx","component","path","exact","props","memo"],"mappings":"iVAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,QAArC,KAAqD,OAArD,CACA,MAAOC,CAAAA,EAAP,KAAe,kBAAf,CACA,OAASC,cAAT,CAAyBC,KAAzB,KAAsC,gBAAtC,CACA,MAAO,uCAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,OACEC,QADF,CAEEC,KAFF,CAGEC,MAHF,KAIO,kBAJP,CAKA,OAASC,UAAT,CAAqBC,KAArB,KAAkC,eAAlC,CAEA;AACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,C,wFAEA,GAAMC,CAAAA,OAAO,cACX,YAAK,SAAS,CAAC,kBAAf,uBACE,YAAK,SAAS,CAAC,6BAAf,EADF,EADF,CAOA,GAAIC,CAAAA,MAAM,CAAGX,EAAE,CAACG,IAAI,CAACS,OAAN,CAAe,CAACC,UAAU,CAAE,CAAC,WAAD,CAAb,CAAf,CAAf,CACA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAuD,IAArDC,CAAAA,KAAqD,MAArDA,KAAqD,CAA/CC,IAA+C,MAA/CA,IAA+C,CAA1CC,iBAA0C,MAA1CA,iBAA0C,CAAxBC,QAAwB,MAAxBA,QAAwB,CAAfC,SAAe,MAAfA,SAAe,CACxE,GAAMC,CAAAA,QAAQ,CAAG,gBAAjB,CACA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,IAAD,QAAUpB,CAAAA,KAAK,CAACoB,IAAD,CAAf,EAAf,CACA,cAAyBvB,QAAQ,CAAC,KAAD,CAAjC,wCAAOwB,KAAP,eAAaC,QAAb,eAGA1B,SAAS,CAAC,UAAI,CACX;AAEDqB,SAAS,CAACR,MAAD,CAAT,CAEA,GAAIc,CAAAA,IAAI,CAAGV,KAAX,CACAW,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA4BF,IAA5B,EAECd,MAAM,CAACiB,IAAP,CAAY,OAAZ,CAAoB,CAACZ,IAAI,CAAJA,IAAD,CAAMS,IAAI,CAAJA,IAAN,CAApB,CAAiC,UAAK,CACpC,CADF,EAGCN,SAAS,CAACR,MAAD,CAAT,CAIAA,MAAM,CAACkB,EAAP,CAAU,iBAAV,CAA4B,SAACC,YAAD,CAAgB,CAC3Cb,iBAAiB,CAACa,YAAY,CAAC,CAAD,CAAZ,CAAgBC,KAAjB,CAAjB,CACCb,QAAQ,CAACY,YAAY,CAAC,CAAD,CAAZ,CAAgBR,IAAjB,CAAR,CACAU,UAAU,CAAC,UAAM,CAChBR,QAAQ,CAAC,IAAD,CAAR,CACAH,MAAM,CAACS,YAAY,CAAC,CAAD,CAAZ,CAAgBC,KAAhB,CAAsB,oBAAvB,CAAN,CACA,CAHS,CAGP,IAHO,CAAV,CAKE;AACH,CATD,EAWH,CA1BQ,CA0BP,CAACX,QAAD,CA1BO,CAAT,CA8BA,mBACE,cAAM,SAAS,CAAC,QAAhB,wBACE,KAAC,UAAD,EAAY,KAAK,KAAjB,uBACE,KAAC,QAAD,EAAU,QAAQ,CAAEV,OAApB,uBACE,MAAC,MAAD,YACGD,MAAM,CAACwB,GAAP,CAAW,SAACC,KAAD,CAAQC,GAAR,CAAgB,CAC1B,MAAOD,CAAAA,KAAK,CAACE,SAAN,eACL,KAAC,KAAD,EAEE,IAAI,CAAEF,KAAK,CAACG,IAFd,CAGE,KAAK,CAAEH,KAAK,CAACI,KAHf,CAIE,IAAI,CAAEJ,KAAK,CAAClB,IAJd,CAKE,MAAM,CAAE,gBAAAuB,KAAK,qBACX,KAAC,KAAD,wBACE,KAAC,KAAD,CAAO,SAAP,gBAAiB,MAAM,CAAE5B,MAAzB,EAAqC4B,KAArC,EADF,EADW,EALf,EACOJ,GADP,CADF,CAYD,CAbA,CADH,cAeE,KAAC,QAAD,EAAU,IAAI,CAAC,GAAf,CAAmB,EAAE,CAAC,YAAtB,EAfF,GADF,EADF,EADF,cAsBE,KAAC,cAAD,IAtBF,GADF,CA0BD,CA9DD,CAgEA,2BAAevC,KAAK,CAAC4C,IAAN,CAAW1B,UAAX,CAAf","sourcesContent":["import React, { Suspense, useEffect, useState } from 'react';\nimport io from 'socket.io-client';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Urls from 'src/Api/urls';\nimport {\n  Redirect,\n  Route,\n  Switch\n} from 'react-router-dom'\nimport { CContainer, CFade } from '@coreui/react'\n\n// routes config\nimport routes from '../routes'\n  \nconst loading = (\n  <div className=\"pt-3 text-center\">\n    <div className=\"sk-spinner sk-spinner-pulse\"></div>\n  </div>\n)\n\n\nlet socket = io(Urls.baseUrl, {transports: ['websocket']});\nconst TheContent = ({email,name,notificationCount,Messages,setSocket}) => {\n  const ENDPOINT = 'localhost:4000';\n  const notify = (data) => toast(data);\n  const [click,setClick] = useState(false);\n\n\n  useEffect(()=>{\n     //  socket = io.connect(ENDPOINT);\n   \n    setSocket(socket);\n\n    let room = email;\n    localStorage.setItem('mail',room);\n \n     socket.emit('joins',{name,room}, () =>{\n      });\n       \n      setSocket(socket)\n \n     \n \n      socket.on('newNotification',(notification)=>{\n       notificationCount(notification[0].count);\n        Messages(notification[0].data);\n        setTimeout(() => {\n         setClick(true);\n         notify(notification[0].count+\" New Notifications\");\n        }, 2000);\n    \n          // console.log(notification);\n      })\n      \n  },[ENDPOINT]);\n\n\n \n  return (\n    <main className=\"c-main\">\n      <CContainer fluid>\n        <Suspense fallback={loading}>\n          <Switch>\n            {routes.map((route, idx) => {\n              return route.component && (\n                <Route\n                  key={idx}\n                  path={route.path}\n                  exact={route.exact}\n                  name={route.name}\n                  render={props => (\n                    <CFade>\n                      <route.component socket={socket} {...props} />\n                    </CFade>\n                  )} />\n              )\n            })}\n            <Redirect from=\"/\" to=\"/dashboard\" />\n          </Switch>\n        </Suspense>\n      </CContainer>\n      <ToastContainer />\n    </main>\n  )\n}\n\nexport default React.memo(TheContent)\n"]},"metadata":{},"sourceType":"module"}