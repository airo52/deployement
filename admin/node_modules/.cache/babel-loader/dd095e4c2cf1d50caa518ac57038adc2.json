{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Dropzone from'./dropzone/Dropzone';import{CKEditor}from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import{useEffect,useState}from'react';import swal from'sweetalert';import{Modal,Button}from'react-bootstrap';import ApiRequest from'src/Api/Data/requestApi';import FormValidation from'../../Users/writers/formValidate';import ModalCard from'src/views/modal/Modal';import TableCard from'src/views/table/TableCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostTask=function PostTask(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),validFiles=_useState2[0],setValidFiles=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),Show=_useState4[0],setShow=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),prog=_useState6[0],setProg=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),categories=_useState8[0],setCategories=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],setTitle=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),category=_useState12[0],setCategory=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),time=_useState14[0],setTime=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),expectedDate=_useState16[0],setExpectedDate=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),pages=_useState18[0],setPage=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),pricePerpage=_useState20[0],setPricePerPag=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),totalAmountTobePaid=_useState22[0],setAmountToBePaid=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),description=_useState24[0],setDescription=_useState24[1];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),workType=_useState26[0],setWorktype=_useState26[1];var _useState27=useState(''),_useState28=_slicedToArray(_useState27,2),service=_useState28[0],setService=_useState28[1];var _useState29=useState(''),_useState30=_slicedToArray(_useState29,2),selectedInvoice=_useState30[0],setSelectedInvoice=_useState30[1];var _useState31=useState(''),_useState32=_slicedToArray(_useState31,2),selectedInvoiceEndDate=_useState32[0],setSelectedInvoiceEndate=_useState32[1];var _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),openInvoices=_useState34[0],setOpenInvoices=_useState34[1];var _useState35=useState(''),_useState36=_slicedToArray(_useState35,2),invoiceId=_useState36[0],setInvoiceId=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),show=_useState38[0],setShows=_useState38[1];var _useState39=useState(false),_useState40=_slicedToArray(_useState39,2),isShowLoader=_useState40[0],setShowLoader=_useState40[1];var LoadOpenInvoices=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,filteredData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ApiRequest.LoadOpenInvoices();case 2:result=_context.sent;filteredData=[];result.data.forEach(function(element){var dat={taskid:element.invoice_id,status:/*#__PURE__*/_jsx(\"span\",{className:\"badge badge-info\",children:\"open\"}),start:element.created_date,deadline:element.end_date,Action:Btns(element.invoice_id,element.Invoice,element.end_date)};filteredData.push(dat);});setOpenInvoices(filteredData);//console.log(result);\ncase 6:case\"end\":return _context.stop();}}},_callee);}));return function LoadOpenInvoices(){return _ref.apply(this,arguments);};}();var assignInvoice=function assignInvoice(invoice_id,invoice,invoiceEndate){setSelectedInvoice(invoice);setSelectedInvoiceEndate(invoiceEndate);setInvoiceId(invoice_id);};var assignNewInvoice=function assignNewInvoice(startDate){setSelectedInvoice('new');setSelectedInvoiceEndate(startDate);setInvoiceId('');};var CloseInvoice=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(invoice_id){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return ApiRequest.CloseInvoice(invoice_id);case 2:result=_context2.sent;if(result.data==='done'){swal('success','Invoice closed successfully','success');LoadOpenInvoices();}else{swal('error','invoice could not be closed','error');}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function CloseInvoice(_x){return _ref2.apply(this,arguments);};}();var Btns=function Btns(task_id,invoice,endate){return/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return assignInvoice(task_id,invoice,endate);},className:\"btn btn-info fa fa-check\"}),\"\\xA0 \",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return CloseInvoice(task_id);},className:\"btn btn-success fa fa-trash\"})]});};var AssignContent=function AssignContent(){var columns=[{dataField:\"taskid\",text:\"#id\"},{dataField:\"status\",text:\"Invoice status\",sort:true},{dataField:\"start\",text:\"start date\",sort:true},{dataField:\"deadline\",text:\"Deadline\",sort:true},{dataField:\"Action\",text:\"Action\"}];return/*#__PURE__*/_jsx(TableCard,{columns:columns,products:openInvoices,title:\"Existing Invoice\"});};var Contents=function Contents(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"start date\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return assignNewInvoice(e.target.value);},type:\"date\",placeholder:\"end date\",className:\"form-control\"})]}),/*#__PURE__*/_jsx(AssignContent,{})]});};var handleClose=function handleClose(){setShows(false);};var handleShow=function handleShow(){LoadOpenInvoices();setShows(true);};var createInvoice=function createInvoice(){};var LoadCategories=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return ApiRequest.getCategories();case 2:result=_context3.sent;setCategories(result.data);//  setSelected(result.data)\ncase 4:case\"end\":return _context3.stop();}}},_callee3);}));return function LoadCategories(){return _ref3.apply(this,arguments);};}();useEffect(function(){LoadCategories();},[]);var HandleClose=function HandleClose(){setShow(false);};var setPages=function setPages(page){var total=pricePerpage*page;setAmountToBePaid(total);setPage(page);};var setPricePerPage=function setPricePerPage(price){var total=price*pages;setAmountToBePaid(total);setPricePerPag(price);};var Update=function Update(){var number=prog;var progs=parseInt(prog);if(progs>=100){clearInterval(progress);setTimeout(function(){setShow(false);swal(\"Upload Success\",\"file uploaded succesfully\",\"success\");},1500);};number=number+10;setProg(number);};var progress=function progress(){setInterval(function(){Update();},1500);};var HandlePostTask=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var check,result,_result$data,success,lastId,number,total,index,newValue,element,results,resultst;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:/* selectedInvoice\n    selectedInvoiceEndDate\n     invoiceId\n     */check=FormValidation.postTaskForm(title,category,time,expectedDate,pages,pricePerpage,totalAmountTobePaid,description,service,workType,selectedInvoice);if(!(check==true)){_context4.next=40;break;}if(!(validFiles.length!==0)){_context4.next=37;break;}_context4.next=5;return ApiRequest.postTask(title,category,time,expectedDate,pages,pricePerpage,totalAmountTobePaid,description,service,workType,selectedInvoice,selectedInvoiceEndDate,invoiceId);case 5:result=_context4.sent;_result$data=result.data,success=_result$data.success,lastId=_result$data.lastId;if(!(success==true)){_context4.next=35;break;}number=1;total=validFiles.length;//setShow(true);\nif(!(validFiles.length!==0)){_context4.next=34;break;}setShow(true);index=0;case 13:if(!(index<validFiles.length)){_context4.next=31;break;}newValue=Math.floor(number/total*100);element=validFiles[index];// const result = await ApiRequest.uploadFiles(lastId,element);\n_context4.next=18;return ApiRequest.uploadFiles2(element);case 18:results=_context4.sent;if(!(results!==false)){_context4.next=24;break;}_context4.next=22;return ApiRequest.uploadFiles(lastId,results);case 22:resultst=_context4.sent;if(resultst==true){// swal('success','Task submited succesfully','success');\n//getTaskInprogress();\n}else{swal('Error','Proccess Failed','error');}case 24:if(!(result==true)){_context4.next=28;break;}setProg(newValue);number=number+1;return _context4.abrupt(\"continue\",28);case 28:index++;_context4.next=13;break;case 31:setTimeout(function(){setValidFiles([]);setTitle('');setCategory('');setTime('');setExpectedDate('');setPage('');setPricePerPag('');setAmountToBePaid('');setDescription('');setWorktype('');setService('');setShow(false);setProg(0);swal(\"success\",\"upload succesfull\",\"success\");},1000);//progress();\n_context4.next=35;break;case 34:swal(\"Provide Files\",\"file uploaded Failed\",\"error\");case 35:_context4.next=38;break;case 37:swal(\"Provide Files\",\"file uploaded Failed\",\"error\");case 38:_context4.next=41;break;case 40:swal(\"Submision Error\",check,\"error\");case 41:case\"end\":return _context4.stop();}}},_callee4);}));return function HandlePostTask(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container card\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{style:{height:'50px',outline:\"none\"},onClick:function onClick(){return handleShow();},className:\"btn-primary shadow-none\",children:\"SELECT INVOICE\"}),/*#__PURE__*/_jsxs(\"form\",{style:{marginTop:\"30px\",marginBottom:\"30px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputEmail4\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{value:title,type:\"text\",onChange:function onChange(e){return setTitle(e.target.value);},className:\"form-control\",id:\"inputEmail4\",placeholder:\"Title\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputPassword4\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return setCategory(e.target.value);},className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",selected:true,children:\"chose Category\"}),categories.map(function(item){return/*#__PURE__*/_jsx(\"option\",{children:item.category_name});})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputCity\",children:\"Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:time,onChange:function onChange(e){return setTime(e.target.value);},className:\"form-control\",id:\"inputCity\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputState\",children:\"Expected date\"}),/*#__PURE__*/_jsx(\"input\",{value:expectedDate,onChange:function onChange(e){return setExpectedDate(e.target.value);},className:\"form-control\",type:\"date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Pages\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:pages,onChange:function onChange(e){return setPages(e.target.value);},className:\"form-control\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"pages\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Price (Ksh per page)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:pricePerpage,onChange:function onChange(e){return setPricePerPage(e.target.value);},className:\"form-control\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"price Ksh\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Total Ksh to Be Paid\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:totalAmountTobePaid,disabled:true,className:\"form-control\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"price in dollars\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Work type\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:workType,onChange:function onChange(e){return setWorktype(e.target.value);},className:\"form-control\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"Work type\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Service\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:service,onChange:function onChange(e){return setService(e.target.value);},className:\"form-control\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"service\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Selected Invoice\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:true,value:selectedInvoice,className:\"form-control\",placeholder:\"seleted invoice\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Selected Invoice end date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",disabled:true,value:selectedInvoiceEndDate,className:\"form-control\",placeholder:\"seleted invoice end date\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"block\"},class:\"form-group col-md-12\",children:/*#__PURE__*/_jsx(Dropzone,{validFiles:validFiles,setValidFiles:setValidFiles})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Descripe task Here(..Task Details)\"}),/*#__PURE__*/_jsx(CKEditor,{editor:ClassicEditor// data={message}\n,onReady:function onReady(editor){// You can store the \"editor\" and use when it is needed.\n//console.log( 'Editor is ready to use!', editor );\neditor.editing.view.change(function(writer){writer.setStyle(\"height\",\"300px\",editor.editing.view.document.getRoot());});},onChange:function onChange(event,editor){var data=editor.getData();setDescription(data);//setMessage(data);\n}})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return HandlePostTask();},type:\"button\",className:\"btn btn-primary\",children:\"Post New Task\"})]})]}),/*#__PURE__*/_jsx(ModalCard,{content:Contents(),Show:show,Close:handleClose,Save:createInvoice,ButtonName:\"Create New Invoice\"}),/*#__PURE__*/_jsxs(Modal,{show:Show,onHide:HandleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Uploading Task\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(\"small\",{children:[\"Upload Progress \",prog,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress mb-3\",style:{height:\"15px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar bg-primary\",role:\"progressbar\",style:{width:prog+\"%\"},\"aria-valuenow\":\"72\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"})})]})]})]});};export default PostTask;","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/admin/src/views/base/Task/post/postTask.js"],"names":["Dropzone","CKEditor","ClassicEditor","useEffect","useState","swal","Modal","Button","ApiRequest","FormValidation","ModalCard","TableCard","PostTask","validFiles","setValidFiles","Show","setShow","prog","setProg","categories","setCategories","title","setTitle","category","setCategory","time","setTime","expectedDate","setExpectedDate","pages","setPage","pricePerpage","setPricePerPag","totalAmountTobePaid","setAmountToBePaid","description","setDescription","workType","setWorktype","service","setService","selectedInvoice","setSelectedInvoice","selectedInvoiceEndDate","setSelectedInvoiceEndate","openInvoices","setOpenInvoices","invoiceId","setInvoiceId","show","setShows","isShowLoader","setShowLoader","LoadOpenInvoices","result","filteredData","data","forEach","element","dat","taskid","invoice_id","status","start","created_date","deadline","end_date","Action","Btns","Invoice","push","assignInvoice","invoice","invoiceEndate","assignNewInvoice","startDate","CloseInvoice","task_id","endate","AssignContent","columns","dataField","text","sort","Contents","e","target","value","handleClose","handleShow","createInvoice","LoadCategories","getCategories","HandleClose","setPages","page","total","setPricePerPage","price","Update","number","progs","parseInt","clearInterval","progress","setTimeout","setInterval","HandlePostTask","check","postTaskForm","length","postTask","success","lastId","index","newValue","Math","floor","uploadFiles2","results","uploadFiles","resultst","height","outline","marginTop","marginBottom","map","item","category_name","display","editor","editing","view","change","writer","setStyle","document","getRoot","event","getData","width"],"mappings":"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","sourcesContent":["import Dropzone from './dropzone/Dropzone';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { useEffect, useState } from 'react';\nimport swal from 'sweetalert';\nimport { Modal ,Button} from 'react-bootstrap';\nimport ApiRequest from 'src/Api/Data/requestApi';\nimport FormValidation from '../../Users/writers/formValidate';\nimport ModalCard from 'src/views/modal/Modal';\nimport TableCard from 'src/views/table/TableCard';\n\nconst PostTask=()=>{\n\n  const [validFiles, setValidFiles] = useState([]);\n  const [Show,setShow]= useState(false);\n  const [prog,setProg]= useState(0);\n  const [categories,setCategories]=useState([]);\n\n  const [title,setTitle]= useState('');\n  const [category,setCategory] = useState('');\n  const [time,setTime] = useState('');\n  const [expectedDate,setExpectedDate]=useState('');\n  const [pages,setPage]= useState('');\n  const [pricePerpage,setPricePerPag]= useState('');\n  const [totalAmountTobePaid,setAmountToBePaid]=useState('');\n  const [description,setDescription]=useState('');\n  const [workType,setWorktype] = useState('');\n  const [service,setService] = useState('');\n\n  const [selectedInvoice,setSelectedInvoice] = useState('');\n  const [selectedInvoiceEndDate,setSelectedInvoiceEndate] = useState('');\n  const [openInvoices,setOpenInvoices] = useState([]);\n  const [invoiceId,setInvoiceId] = useState('');\n\n  const [show, setShows] = useState(false);\n  const [isShowLoader,setShowLoader] = useState(false);\n\n\n\n\n  const LoadOpenInvoices =async  ()=>{\n       const result = await ApiRequest.LoadOpenInvoices();\n\n       var filteredData =[];\n\n       result.data.forEach(element => {\n        var dat=  {\n            taskid:element.invoice_id,\n            status:<span className=\"badge badge-info\">open</span>,\n            start:element.created_date,\n            deadline:element.end_date,\n            Action:Btns(element.invoice_id,element.Invoice,element.end_date)\n          }\n  \n          filteredData.push(dat);\n        });\n\n        setOpenInvoices(filteredData)\n                //console.log(result);\n  }\n\n  const assignInvoice =(invoice_id,invoice,invoiceEndate)=>{\n     \n        setSelectedInvoice(invoice);\n        setSelectedInvoiceEndate(invoiceEndate);\n        setInvoiceId(invoice_id);\n  }\n\n  const assignNewInvoice = (startDate)=>{\n    setSelectedInvoice('new');\n    setSelectedInvoiceEndate(startDate);\n    setInvoiceId(''); \n  }\n\n  const CloseInvoice = async (invoice_id)=>{\n             const result = await ApiRequest.CloseInvoice(invoice_id);\n\n             if(result.data === 'done'){\n                 swal('success','Invoice closed successfully','success');\n                 LoadOpenInvoices();\n             }else{\n                 swal('error','invoice could not be closed','error');\n             }\n\n  }\n  \n  const  Btns =(task_id,invoice,endate)=>{\n    return<> <button onClick={()=>assignInvoice(task_id,invoice,endate)} className=\"btn btn-info fa fa-check\"></button>\n     &nbsp; <button onClick={()=>CloseInvoice(task_id)} className=\"btn btn-success fa fa-trash\"></button>\n    </>;\n}\n   const AssignContent=()=>{\n     \n     const columns = [\n       {\n         dataField: \"taskid\",\n         text: \"#id\",\n        \n       },\n       {\n         dataField: \"status\",\n         text: \"Invoice status\",\n       \n         sort: true\n       },\n       {\n         dataField: \"start\",\n         text: \"start date\",\n       \n         sort: true\n       },\n       {\n         dataField: \"deadline\",\n         text: \"Deadline\",\n       \n         sort: true\n       },\n      \n       {\n           dataField: \"Action\",\n           text: \"Action\",\n        \n         }\n     ];\n\n    \n      return <TableCard\n                columns={columns}\n                products={openInvoices}\n                title={\"Existing Invoice\"}\n             />\n   }\n  const Contents =()=>{\n      return <>\n               <form className=\"form\">\n                     <label>start date</label>\n                     <input onChange={(e)=>assignNewInvoice(e.target.value)} type=\"date\" placeholder=\"end date\" className=\"form-control\"/>\n               </form>\n                <AssignContent/>\n          </>\n  }\n  const handleClose = () => {setShows(false)};\n  const handleShow = () => {LoadOpenInvoices()\n     setShows(true)};\n\n  const createInvoice =()=>{\n\n  }\n\n\n  const LoadCategories =async ()=>{\n    \n    const result = await ApiRequest.getCategories();\n  \n     setCategories(result.data);\n  //  setSelected(result.data)\n  }\n\n  useEffect(()=>{\n    LoadCategories();\n  },[]);\n\n  const HandleClose = () =>{\n    setShow(false);\n  }\n\n  const setPages=(page)=>{\n     var total = pricePerpage * page;\n     setAmountToBePaid(total);\n     setPage(page);\n\n  }\n  const setPricePerPage=(price)=>{\n     var total = price * pages;\n     setAmountToBePaid(total);\n     setPricePerPag(price);\n  }\n\n  const Update =()=>{\n    var number = prog;\n    var progs = parseInt(prog);\n    if(progs >= 100){\n      clearInterval(progress);\n      setTimeout(() => {\n        setShow(false);\n        swal(\"Upload Success\",\"file uploaded succesfully\",\"success\");\n      }, 1500);\n    };\n  \n    \n  \n  \n  \n  \n  number = number +10;\n    \n   setProg(number);\n  }\n\n  var progress = function(){ \n    setInterval(() => {\n    Update();\n}, 1500);\n  }\n const HandlePostTask=async ()=>{\n\n   /* selectedInvoice\n    selectedInvoiceEndDate\n     invoiceId\n     */\n   \n   \n   var check= FormValidation.postTaskForm(title,category,time,expectedDate,pages,pricePerpage,totalAmountTobePaid,description,service,workType,selectedInvoice);\n    \n   if(check == true){\n    if(validFiles.length !==0){\n        const result = await ApiRequest.postTask(title,category,time,expectedDate,pages,pricePerpage,totalAmountTobePaid,description,service,workType,selectedInvoice,selectedInvoiceEndDate,invoiceId);\n\n        const {success,lastId}= result.data;\n         if(success == true){\n               \n  var number = 1;\n  var total = validFiles.length;\n\n \n//setShow(true);\nif(validFiles.length !==0){\n  setShow(true);\n  for (let index = 0; index <validFiles.length; index++) {\n    var newValue = Math.floor((number/total) * 100);\n    const element =validFiles[index];\n   // const result = await ApiRequest.uploadFiles(lastId,element);\n\n   const results = await ApiRequest.uploadFiles2(element);\n\n   \n\n    if(results !==false){\n      const resultst = await ApiRequest.uploadFiles(lastId,results)\n     \n      if(resultst == true){\n         // swal('success','Task submited succesfully','success');\n          //getTaskInprogress();\n      }else{\n          swal('Error','Proccess Failed','error');\n      }\n  }\n    if(result == true){\n      setProg(newValue);\n      number = number + 1;\n     continue;\n   }\n    \n  }\n  setTimeout(()=>{\n     setValidFiles([]);\n     setTitle('');\n     setCategory('');\n     setTime('');\n    setExpectedDate('');\n    setPage('');\n    setPricePerPag('');\n    setAmountToBePaid('');\n    setDescription('');\n    setWorktype('');\n    setService('');\n    setShow(false);\n    setProg(0);\n    swal(\"success\",\"upload succesfull\",\"success\");\n  },1000);\n\n//progress();\n }else{\n  swal(\"Provide Files\",\"file uploaded Failed\",\"error\");\n }\n\n         }\n          }else{\n            swal(\"Provide Files\",\"file uploaded Failed\",\"error\");\n           }  //\n\n   }else{\n    swal(\"Submision Error\",check,\"error\");\n   }\n\n  \n    \n   \n  }\n\n\n\n\n    return <>\n    <div  className=\"container card\">\n      <br/>\n    <button style={{height:'50px',outline:\"none\"}} onClick={()=>handleShow()} className=\"btn-primary shadow-none\">SELECT INVOICE</button>\n             <form style={{\n                    marginTop:\"30px\",\n                    marginBottom:\"30px\"\n             }}>\n\n  <div className=\"form-row\">\n    \n    <div className=\"form-group col-md-6\">\n      <label for=\"inputEmail4\">Title</label>\n      <input value={title} type=\"text\" onChange={(e)=>setTitle(e.target.value)} className=\"form-control\" id=\"inputEmail4\" placeholder=\"Title\"/>\n    </div>\n    <div className=\"form-group col-md-6\">\n      <label for=\"inputPassword4\">Category</label>\n       <select onChange={(e)=>setCategory(e.target.value)} className=\"form-control\">\n           <option value=\"0\" selected>chose Category</option>\n           {categories.map((item)=>{\n           return <option>{item.category_name}</option>\n         })}\n       </select>\n    </div>\n  </div>\n \n  <div className=\"form-row\">\n    <div className=\"form-group col-md-6\">\n      <label for=\"inputCity\">Time</label>\n      <input type=\"time\" value={time} onChange={(e)=>setTime(e.target.value)} className=\"form-control\" id=\"inputCity\"/>\n    </div>\n    <div className=\"form-group col-md-4\">\n      <label for=\"inputState\">Expected date</label>\n        <input value={expectedDate} onChange={(e)=>setExpectedDate(e.target.value)} className=\"form-control\" type=\"date\"/>\n    </div>\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Pages</label>\n      <input type=\"number\" value={pages} onChange={(e)=>setPages(e.target.value)} className=\"form-control\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"pages\" />\n      \n    </div>\n\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Price (Ksh per page)</label>\n      <input type=\"number\" value={pricePerpage} onChange={(e)=>setPricePerPage(e.target.value)} className=\"form-control\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"price Ksh\" />\n      \n    </div>\n\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Total Ksh to Be Paid</label>\n      <input type=\"number\" value={totalAmountTobePaid} disabled className=\"form-control\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"price in dollars\" />\n      \n    </div>\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Work type</label>\n      <input type=\"text\" value={workType} onChange={(e)=>setWorktype(e.target.value)}  className=\"form-control\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"Work type\" />\n      \n    </div>\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Service</label>\n      <input type=\"text\" value={service} onChange={(e)=>setService(e.target.value)}  className=\"form-control\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"service\" />\n      \n    </div>\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Selected Invoice</label>\n      <input type=\"text\" disabled value={selectedInvoice}   className=\"form-control\" placeholder=\"seleted invoice\" />\n      \n    </div>\n\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Selected Invoice end date</label>\n      <input type=\"text\" disabled value={selectedInvoiceEndDate}   className=\"form-control\" placeholder=\"seleted invoice end date\" />\n      \n    </div>\n  </div>\n\n  <div className=\"form-row\">\n  <div style={{display:\"block\"}} class=\"form-group col-md-12\">\n      <Dropzone validFiles={validFiles} setValidFiles={setValidFiles}/>\n</div>\n  </div>\n\n  <div className=\"form-row\">\n     <div className=\"form-group col-md-12\">\n     <label for=\"inputZip\">Descripe task Here(..Task Details)</label>\n   <CKEditor\n       \n       editor={ ClassicEditor }\n      // data={message}\n    \n       onReady={ editor => {\n           // You can store the \"editor\" and use when it is needed.\n           //console.log( 'Editor is ready to use!', editor );\n           editor.editing.view.change((writer) => {\n            writer.setStyle(\n                \"height\",\n                \"300px\",\n                editor.editing.view.document.getRoot()\n            );\n            });\n       } }\n       onChange={ ( event, editor ) => {\n           const data = editor.getData();\n           setDescription(data);\n           \n           //setMessage(data);\n       } }\n      \n   />\n     </div>\n  </div>\n  \n  <button onClick={()=>HandlePostTask()}  type=\"button\" className=\"btn btn-primary\">Post New Task</button>\n</form>\n</div>\n<ModalCard\n   content={Contents()}\n    Show={show}\n    Close={handleClose}\n   Save={createInvoice} ButtonName={\"Create New Invoice\"}\n/>\n\n\n\n\n<Modal show={Show} onHide={HandleClose}>\n<Modal.Header>\n  <Modal.Title>Uploading Task</Modal.Title>\n</Modal.Header>\n<Modal.Body>\n<small>Upload Progress {prog}%</small>\n                      <div className=\"progress mb-3\" style={{height:\"15px\"}}>\n                        <div className=\"progress-bar bg-primary\" role=\"progressbar\" style={{width:prog+\"%\"}} aria-valuenow=\"72\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n</Modal.Body>\n\n</Modal>\n\n\n          </>;\n}\n\nexport default PostTask;"]},"metadata":{},"sourceType":"module"}