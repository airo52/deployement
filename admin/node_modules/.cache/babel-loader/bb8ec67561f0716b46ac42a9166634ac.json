{"ast":null,"code":"import _objectSpread from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{HashRouter,Route,Switch,useHistory}from'react-router-dom';import{requestRefreshToken,veryAccessTokens}from'./Api/authThenticateToken';import io from'socket.io-client';import'./scss/style.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loading=/*#__PURE__*/_jsx(\"div\",{className:\"pt-3 text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sk-spinner sk-spinner-pulse\"})});// Containers\nvar TheLayout=/*#__PURE__*/React.lazy(function(){return import('./containers/TheLayout');});// Pages\nvar Login=/*#__PURE__*/React.lazy(function(){return import('./views/pages/login/Login');});var Activate=/*#__PURE__*/React.lazy(function(){return import('./views/pages/activate/activate');});var Forgot=/*#__PURE__*/React.lazy(function(){return import('./views/pages/activate/forgot');});//let socket = io('http://localhost:4000', {transports: ['websocket']});\nfunction NotFound(){var history=useHistory();return/*#__PURE__*/_jsx(\"div\",{style:{margin:\"300px auto\"},className:\"page-wrap d-flex flex-row align-items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 text-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"display-1 d-block\",children:\"404\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 lead\",children:\"The page you are looking for was not found.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-simple\",onClick:function onClick(){return history.goBack();},children:\"Go Back\"})]})})})});}var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.handleProfile=function(data){var username=data.username,profile=data.profile,email=data.email;_this.setState({username:username,profile:profile,home:true,email:email});};_this.route=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var tr,ta,check,checkRefresh;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://this.state.home == true?\"\":window.location.href=\"/#/auth\";\ntr=localStorage.getItem('tr');ta=localStorage.getItem('ta');_context.next=4;return veryAccessTokens(ta,_this.handleProfile);case 4:check=_context.sent;if(!(check==true)){_context.next=9;break;}_this.setState({home:true});_context.next=14;break;case 9:if(!(check==false)){_context.next=14;break;}_context.next=12;return requestRefreshToken(tr,_this.handleProfile);case 12:checkRefresh=_context.sent;if(checkRefresh==true){_this.setState({home:true});}case 14:if(!_this.state.home){window.location.href=\"/#/login\";}case 15:case\"end\":return _context.stop();}}},_callee);}));_this.componentDidMount=function(){var url=window.location.href.split('/#/')[1];if(url===\"auth/activate\"){}else{if(url.split('?')[0]===\"auth/activate\"){console.log(url);}else{_this.route();}}};_this.state={username:\"\",profile:\"\",home:false,email:'',ENDPOINT:'localhost:4000'};return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(HashRouter,{children:/*#__PURE__*/_jsx(React.Suspense,{fallback:loading,children:/*#__PURE__*/_jsxs(Switch,{children:[!this.state.home&&/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",name:\"Login Page\",render:function render(props){return/*#__PURE__*/_jsx(Login,_objectSpread({Profile:_this2.handleProfile},props));}}),!this.state.home&&/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",name:\"Login Page\",render:function render(props){return/*#__PURE__*/_jsx(Login,_objectSpread({Profile:_this2.handleProfile},props));}}),!this.state.home&&/*#__PURE__*/_jsx(Route,{exact:true,path:\"/auth/ForgotPassWord\",name:\"Forgot\",render:function render(props){return/*#__PURE__*/_jsx(Forgot,_objectSpread({},props));}}),!this.state.home&&/*#__PURE__*/_jsx(Route,{exact:true,path:\"/auth/activate\",name:\"Login Page\",render:function render(props){return/*#__PURE__*/_jsx(Activate,_objectSpread({},props));}}),this.state.home&&/*#__PURE__*/_jsx(Route,{path:\"/\",name:\"Home\",render:function render(props){return/*#__PURE__*/_jsx(TheLayout,_objectSpread({Uname:_this2.state.username,email:_this2.state.email,Pfile:_this2.state.profile},props));}}),/*#__PURE__*/_jsx(Route,{component:NotFound})]})})});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/admin/src/App.js"],"names":["React","Component","HashRouter","Route","Switch","useHistory","requestRefreshToken","veryAccessTokens","io","loading","TheLayout","lazy","Login","Activate","Forgot","NotFound","history","margin","goBack","App","props","handleProfile","data","username","profile","email","setState","home","route","tr","localStorage","getItem","ta","check","checkRefresh","state","window","location","href","componentDidMount","url","split","console","log","ENDPOINT"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { HashRouter, Route, Switch ,useHistory} from 'react-router-dom';\nimport {  requestRefreshToken, veryAccessTokens} from './Api/authThenticateToken';\nimport io from 'socket.io-client';\nimport './scss/style.scss';\n\nconst loading = (\n  <div className=\"pt-3 text-center\">\n    <div className=\"sk-spinner sk-spinner-pulse\"></div>\n  </div>\n)\n\n// Containers\nconst TheLayout = React.lazy(() => import('./containers/TheLayout'));\n\n// Pages\nconst Login = React.lazy(() => import('./views/pages/login/Login'));\nconst Activate = React.lazy(()=>import('./views/pages/activate/activate'));\nconst Forgot = React.lazy(()=>import('./views/pages/activate/forgot'));\n//let socket = io('http://localhost:4000', {transports: ['websocket']});\nfunction NotFound(){\n  let history = useHistory();\n  return <div style={{margin:\"300px auto\"}} className=\"page-wrap d-flex flex-row align-items-center\">\n  <div className=\"container\">\n      <div className=\"row justify-content-center\">\n          <div className=\"col-md-12 text-center\">\n              <span className=\"display-1 d-block\">404</span>\n              <div className=\"mb-4 lead\">The page you are looking for was not found.</div>\n              \n              <button className=\"btn btn-simple\" onClick={() => history.goBack()}>Go Back</button>\n          </div>\n      </div>\n  </div>\n</div>\n}\n\nclass App extends Component {\n\n\n  constructor(props){\n    super(props);\n    this.state={\n         username:\"\",\n         profile:\"\",\n         home:false,\n         email:'',\n        ENDPOINT:'localhost:4000',\n         \n    }\n\n\n  }\n  \n\n  handleProfile=(data)=>{\n    \n    const {username,profile,email} = data;\n  \n    this.setState({username:username,profile:profile,home:true,email:email});\n   \n }\n\n route =async ()=>{\n   \n  //this.state.home == true?\"\":window.location.href=\"/#/auth\";\n    var tr= localStorage.getItem('tr');\n    var ta = localStorage.getItem('ta');\n     \n      const check = await veryAccessTokens(ta,this.handleProfile);//authenTicateWebRefresh(ta,tr,this.handleProfile);\n      \n       \n      \n      if(check == true){\n          this.setState({home:true})\n      }else if( check == false){\n        const checkRefresh = await requestRefreshToken(tr,this.handleProfile);\n        if(checkRefresh == true){\n          this.setState({home:true});\n        }\n      }\n  if(!this.state.home){\n      window.location.href=\"/#/login\"\n  }\n }\n/*\n componentDidMount=()=>{\n  socket = io.connect(this.state.ENDPOINT);\n\n  \n  \n  \n \n  return () =>{\n  socket.emit('disconnect');\n  socket.off();\n  }\n }\n*/\n \n  componentDidMount=()=>{\n    const url = window.location.href.split('/#/')[1];\n\n    if(url === \"auth/activate\"){}\n    else{\n      \n     if(url.split('?')[0] === \"auth/activate\"){\n      console.log(url);\n     }else{\n       \n       this.route();\n     }\n    }\n\n   \n\n  }\n\n  render() {\n  \n    return (\n      <HashRouter>\n          <React.Suspense fallback={loading}>\n            <Switch>\n             {/* <Route exact path=\"/login\" name=\"Login Page\" render={props => <Login {...props}/>} />\n              <Route exact path=\"/register\" name=\"Register Page\" render={props => <Register {...props}/>} />\n              <Route exact path=\"/404\" name=\"Page 404\" render={props => <Page404 {...props}/>} />\n              <Route exact path=\"/500\" name=\"Page 500\" render={props => <Page500 {...props}/>} />\n            */}\n            {!this.state.home && <Route exact path=\"/\" name=\"Login Page\" render={props => <Login Profile={this.handleProfile} {...props}/>} />}\n            {!this.state.home && <Route exact path=\"/login\" name=\"Login Page\" render={props => <Login Profile={this.handleProfile} {...props}/>} />}\n           {!this.state.home && <Route exact path=\"/auth/ForgotPassWord\" name=\"Forgot\" render={props => <Forgot {...props}/>} />}\n           {!this.state.home &&<Route exact path=\"/auth/activate\" name=\"Login Page\" render={props => <Activate {...props}/>} />}\n           {this.state.home && <Route path=\"/\" name=\"Home\" render={props => <TheLayout Uname={this.state.username} email={this.state.email} Pfile={this.state.profile} {...props}/>} />}\n           {/*this.state.home && <Route path=\"/dashboard\" name=\"Dashboard\" render={props=><TheLayout Uname={this.state.username} Pfile={this.state.profile}/>}/>*/}\n           <Route component={NotFound} />\n            </Switch>\n          </React.Suspense>\n      </HashRouter>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}