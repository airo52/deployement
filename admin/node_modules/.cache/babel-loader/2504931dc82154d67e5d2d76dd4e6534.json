{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Axios from \"./config\";\n\nfunction requestRefreshToken(_x, _x2) {\n  return _requestRefreshToken.apply(this, arguments);\n}\n\nfunction _requestRefreshToken() {\n  _requestRefreshToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(refreshToken, Profile) {\n    var endPoint, result, _result$data$tokens, accessToken, _refreshToken, ta, tr;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            endPoint = 'refreshToken?refreshToken=' + refreshToken;\n            _context2.next = 4;\n            return Axios.post(endPoint);\n\n          case 4:\n            result = _context2.sent;\n\n            if (!(result.data == false)) {\n              _context2.next = 9;\n              break;\n            }\n\n            window.location.href = \"/#/login\";\n            _context2.next = 17;\n            break;\n\n          case 9:\n            if (!(result.data.type === \"super\")) {\n              _context2.next = 17;\n              break;\n            }\n\n            _result$data$tokens = result.data.tokens, accessToken = _result$data$tokens.accessToken, _refreshToken = _result$data$tokens.refreshToken;\n            ta = accessToken;\n            tr = _refreshToken;\n            localStorage.setItem('ta', ta);\n            localStorage.setItem('tr', tr); // localStorage.setItem('gh',tr);\n\n            Profile(result.data.data);\n            return _context2.abrupt(\"return\", true);\n\n          case 17:\n            _context2.next = 22;\n            break;\n\n          case 19:\n            _context2.prev = 19;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n\n          case 22:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 19]]);\n  }));\n  return _requestRefreshToken.apply(this, arguments);\n}\n\nfunction verifyAccessToken(_x3, _x4) {\n  return _verifyAccessToken.apply(this, arguments);\n}\n\nfunction _verifyAccessToken() {\n  _verifyAccessToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(accessToken, Profile) {\n    var endPoint, result, _result$data$tokens2, _accessToken, refreshToken, ta, tr;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            endPoint = 'veryAccessToken?accessToken=' + accessToken;\n            _context3.next = 4;\n            return Axios.post(endPoint);\n\n          case 4:\n            result = _context3.sent;\n            console.log(result);\n\n            if (!(result.data.success !== undefined && result.data.success == true)) {\n              _context3.next = 18;\n              break;\n            }\n\n            if (!(result.data.type === \"super\")) {\n              _context3.next = 16;\n              break;\n            }\n\n            _result$data$tokens2 = result.data.tokens, _accessToken = _result$data$tokens2.accessToken, refreshToken = _result$data$tokens2.refreshToken;\n            ta = _accessToken;\n            tr = refreshToken;\n            console.log(result.data.tokens);\n            localStorage.setItem('ta', ta);\n            localStorage.setItem('tr', tr);\n            Profile(result.data.data);\n            return _context3.abrupt(\"return\", result.data.success);\n\n          case 16:\n            _context3.next = 19;\n            break;\n\n          case 18:\n            return _context3.abrupt(\"return\", false);\n\n          case 19:\n            _context3.next = 24;\n            break;\n\n          case 21:\n            _context3.prev = 21;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log(_context3.t0);\n\n          case 24:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 21]]);\n  }));\n  return _verifyAccessToken.apply(this, arguments);\n}\n\nvar authenTicateWebRefresh = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(accessToken, refreshToken, Profile) {\n    var data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(accessToken !== undefined && accessToken !== \"\")) {\n              _context.next = 17;\n              break;\n            }\n\n            if (!(refreshToken !== undefined && refreshToken !== \"\")) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 4;\n            return verifyAccessToken(accessToken, Profile);\n\n          case 4:\n            data = _context.sent;\n            alert(data);\n\n            if (!(data == false)) {\n              _context.next = 11;\n              break;\n            }\n\n            _context.next = 9;\n            return requestRefreshToken(refreshToken, Profile);\n\n          case 9:\n            _context.next = 12;\n            break;\n\n          case 11:\n            alert(data);\n\n          case 12:\n            _context.next = 15;\n            break;\n\n          case 14:\n            return _context.abrupt(\"return\", false);\n\n          case 15:\n            _context.next = 18;\n            break;\n\n          case 17:\n            return _context.abrupt(\"return\", false);\n\n          case 18:\n            return _context.abrupt(\"return\", false);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function authenTicateWebRefresh(_x5, _x6, _x7) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar Tokens = function Tokens() {\n  var accessToken = localStorage.getItem('ta');\n  var refreshToken = localStorage.getItem('tr');\n  return {\n    accessToken: accessToken,\n    refreshToken: refreshToken\n  };\n};\n\n_c = Tokens;\nexport { requestRefreshToken, verifyAccessToken, Tokens, authenTicateWebRefresh };\n\nvar _c;\n\n$RefreshReg$(_c, \"Tokens\");","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/admin/src/Api/authThenticateToken.js"],"names":["Axios","requestRefreshToken","refreshToken","Profile","endPoint","post","result","data","window","location","href","type","tokens","accessToken","ta","tr","localStorage","setItem","console","log","verifyAccessToken","success","undefined","authenTicateWebRefresh","alert","Tokens","getItem"],"mappings":"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","sourcesContent":["import Axios from \"./config\";\n\n\nasync function requestRefreshToken(refreshToken,Profile){\n    try {\n        const endPoint ='refreshToken?refreshToken='+refreshToken;\n       \n        const result = await Axios.post(endPoint);\n        \n        if(result.data == false){\n          \n         window.location.href=\"/#/login\";\n        }else{\n           \n            if(result.data.type === \"super\" ){\n                \n                const { accessToken,refreshToken } = result.data.tokens;\n                \n                const ta=accessToken;\n                const tr=refreshToken;\n                \n                \n                localStorage.setItem('ta',ta);\n                localStorage.setItem('tr',tr);\n               // localStorage.setItem('gh',tr);\n               \n                Profile(result.data.data);\n                return true;\n            }\n            //console.log(result.data)\n            \n        }\n    } catch (error) {\n        console.log(error);\n    }\n   \n}\nasync function verifyAccessToken(accessToken,Profile){\n\n   try {\n          \n           const endPoint ='veryAccessToken?accessToken='+accessToken;\n           const result = await Axios.post(endPoint);\n           console.log(result)\n\n           if(result.data.success !==undefined && result.data.success == true){\n            if(result.data.type === \"super\" ){\n          \n              const { accessToken,refreshToken } = result.data.tokens;\n                \n              const ta=accessToken;\n              const tr=refreshToken;\n              console.log(result.data.tokens);\n              \n              localStorage.setItem('ta',ta);\n              localStorage.setItem('tr',tr);\n  \n  \n              Profile(result.data.data);\n               return result.data.success;\n            }\n          }else{ return false;}\n\n\n          \n   } catch (error) {\n         console.log(error)\n  }\n\n}\n\nconst authenTicateWebRefresh = async (accessToken,refreshToken,Profile)=>{\n    if(accessToken !==undefined && accessToken !==\"\"){\n        if(refreshToken !==undefined && refreshToken !==\"\"){\n            const data=  await verifyAccessToken(accessToken,Profile);\n              alert(data)\n             if(data == false){\n             await requestRefreshToken(refreshToken,Profile);\n              \n             }else{\n                 alert(data);\n             }\n        }else {\n           \n            return false;\n        }\n       \n        \n     }else{\n         return false;\n     }\n\n   return false;\n}\n\nconst Tokens = function(){\n    const accessToken = localStorage.getItem('ta');\n    const refreshToken = localStorage.getItem('tr');\n\n    \n\n    return {accessToken,refreshToken};\n}\n\nexport {requestRefreshToken,verifyAccessToken,Tokens,authenTicateWebRefresh}"]},"metadata":{},"sourceType":"module"}