{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Dropzone from'./dropzone/Dropzone';import{CKEditor}from'@ckeditor/ckeditor5-react';import ClassicEditor from'@ckeditor/ckeditor5-build-classic';import{useEffect,useState}from'react';import swal from'sweetalert';import{Modal,Button}from'react-bootstrap';import ApiRequest from'src/Api/Data/requestApi';import FormValidation from'../../Users/writers/formValidate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PostTask=function PostTask(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),validFiles=_useState2[0],setValidFiles=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),Show=_useState4[0],setShow=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),prog=_useState6[0],setProg=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),categories=_useState8[0],setCategories=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],setTitle=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),category=_useState12[0],setCategory=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),time=_useState14[0],setTime=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),expectedDate=_useState16[0],setExpectedDate=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),pages=_useState18[0],setPage=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),pricePerpage=_useState20[0],setPricePerPag=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),totalAmountTobePaid=_useState22[0],setAmountToBePaid=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),description=_useState24[0],setDescription=_useState24[1];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),workType=_useState26[0],setWorktype=_useState26[1];var _useState27=useState(''),_useState28=_slicedToArray(_useState27,2),service=_useState28[0],setService=_useState28[1];var LoadCategories=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ApiRequest.getCategories();case 2:result=_context.sent;setCategories(result.data);//  setSelected(result.data)\ncase 4:case\"end\":return _context.stop();}}},_callee);}));return function LoadCategories(){return _ref.apply(this,arguments);};}();useEffect(function(){LoadCategories();},[]);var HandleClose=function HandleClose(){setShow(false);};var setPages=function setPages(page){var total=pricePerpage*page;setAmountToBePaid(total);setPage(page);};var setPricePerPage=function setPricePerPage(price){var total=price*pages;setAmountToBePaid(total);setPricePerPag(price);};var Update=function Update(){var number=prog;var progs=parseInt(prog);if(progs>=100){clearInterval(progress);setTimeout(function(){setShow(false);swal(\"Upload Success\",\"file uploaded succesfully\",\"success\");},1500);};number=number+10;setProg(number);};var progress=function progress(){setInterval(function(){Update();},1500);};var HandlePostTask=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var check,result,_result$data,success,lastId,number,total,index,newValue,element,_result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:check=FormValidation.postTaskForm(title,category,time,expectedDate,pages,pricePerpage,totalAmountTobePaid,description,service,workType);if(!(check==true)){_context2.next=35;break;}if(!(validFiles.length!==0)){_context2.next=32;break;}_context2.next=5;return ApiRequest.postTask(title,category,time,expectedDate,pages,pricePerpage,totalAmountTobePaid,description,service,workType);case 5:result=_context2.sent;_result$data=result.data,success=_result$data.success,lastId=_result$data.lastId;if(!(success==true)){_context2.next=30;break;}number=1;total=validFiles.length;//setShow(true);\nif(!(validFiles.length!==0)){_context2.next=29;break;}setShow(true);index=0;case 13:if(!(index<validFiles.length)){_context2.next=26;break;}newValue=Math.floor(number/total*100);element=validFiles[index];_context2.next=18;return ApiRequest.uploadFiles(lastId,element);case 18:_result=_context2.sent;if(!(_result==true)){_context2.next=23;break;}setProg(newValue);number=number+1;return _context2.abrupt(\"continue\",23);case 23:index++;_context2.next=13;break;case 26:setTimeout(function(){setValidFiles([]);setTitle('');setCategory('');setTime('');setExpectedDate('');setPage('');setPricePerPag('');setAmountToBePaid('');setDescription('');setWorktype('');setService('');setShow(false);setProg(0);swal(\"success\",\"upload succesfull\",\"success\");},1000);//progress();\n_context2.next=30;break;case 29:swal(\"Provide Files\",\"file uploaded Failed\",\"error\");case 30:_context2.next=33;break;case 32:swal(\"Provide Files\",\"file uploaded Failed\",\"error\");case 33:_context2.next=36;break;case 35:swal(\"Submision Error\",check,\"error\");case 36:case\"end\":return _context2.stop();}}},_callee2);}));return function HandlePostTask(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container card\",children:/*#__PURE__*/_jsxs(\"form\",{style:{marginTop:\"30px\",marginBottom:\"30px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputEmail4\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{value:title,type:\"text\",onChange:function onChange(e){return setTitle(e.target.value);},className:\"form-control\",id:\"inputEmail4\",placeholder:\"Title\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputPassword4\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return setCategory(e.target.value);},className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",selected:true,children:\"chose Category\"}),categories.map(function(item){return/*#__PURE__*/_jsx(\"option\",{children:item.category_name});})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputCity\",children:\"Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:time,onChange:function onChange(e){return setTime(e.target.value);},className:\"form-control\",id:\"inputCity\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-4\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputState\",children:\"Expected date\"}),/*#__PURE__*/_jsx(\"input\",{value:expectedDate,onChange:function onChange(e){return setExpectedDate(e.target.value);},className:\"form-control\",type:\"date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Pages\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:pages,onChange:function onChange(e){return setPages(e.target.value);},className:\"form-control\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"pages\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Price (Ksh per page)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:pricePerpage,onChange:function onChange(e){return setPricePerPage(e.target.value);},className:\"form-control\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"price Ksh\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Total Ksh to Be Paid\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:totalAmountTobePaid,disabled:true,className:\"form-control\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"price in dollars\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Work type\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:workType,onChange:function onChange(e){return setWorktype(e.target.value);},className:\"form-control\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"Work type\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-2\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Service\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:service,onChange:function onChange(e){return setService(e.target.value);},className:\"form-control\",min:\"0.00\",max:\"10000.00\",step:\"0.01\",placeholder:\"service\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"block\"},class:\"form-group col-md-12\",children:/*#__PURE__*/_jsx(Dropzone,{validFiles:validFiles,setValidFiles:setValidFiles})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group col-md-12\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputZip\",children:\"Descripe task Here(..Task Details)\"}),/*#__PURE__*/_jsx(CKEditor,{editor:ClassicEditor// data={message}\n,onReady:function onReady(editor){// You can store the \"editor\" and use when it is needed.\n//console.log( 'Editor is ready to use!', editor );\neditor.editing.view.change(function(writer){writer.setStyle(\"height\",\"300px\",editor.editing.view.document.getRoot());});},onChange:function onChange(event,editor){var data=editor.getData();setDescription(data);//setMessage(data);\n}})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return HandlePostTask();},type:\"button\",className:\"btn btn-primary\",children:\"Post New Task\"})]})}),/*#__PURE__*/_jsxs(Modal,{show:Show,onHide:HandleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Uploading Task\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(\"small\",{children:[\"Upload Progress \",prog,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress mb-3\",style:{height:\"15px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar bg-primary\",role:\"progressbar\",style:{width:prog+\"%\"},\"aria-valuenow\":\"72\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\"})})]})]})]});};export default PostTask;","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/admin/src/views/base/Task/post/postTask.js"],"names":["Dropzone","CKEditor","ClassicEditor","useEffect","useState","swal","Modal","Button","ApiRequest","FormValidation","PostTask","validFiles","setValidFiles","Show","setShow","prog","setProg","categories","setCategories","title","setTitle","category","setCategory","time","setTime","expectedDate","setExpectedDate","pages","setPage","pricePerpage","setPricePerPag","totalAmountTobePaid","setAmountToBePaid","description","setDescription","workType","setWorktype","service","setService","LoadCategories","getCategories","result","data","HandleClose","setPages","page","total","setPricePerPage","price","Update","number","progs","parseInt","clearInterval","progress","setTimeout","setInterval","HandlePostTask","check","postTaskForm","length","postTask","success","lastId","index","newValue","Math","floor","element","uploadFiles","marginTop","marginBottom","e","target","value","map","item","category_name","display","editor","editing","view","change","writer","setStyle","document","getRoot","event","getData","height","width"],"mappings":"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","sourcesContent":["import Dropzone from './dropzone/Dropzone';\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport { useEffect, useState } from 'react';\nimport swal from 'sweetalert';\nimport { Modal ,Button} from 'react-bootstrap';\nimport ApiRequest from 'src/Api/Data/requestApi';\nimport FormValidation from '../../Users/writers/formValidate';\n\nconst PostTask=()=>{\n\n  const [validFiles, setValidFiles] = useState([]);\n  const [Show,setShow]= useState(false);\n  const [prog,setProg]= useState(0);\n  const [categories,setCategories]=useState([]);\n\n  const [title,setTitle]= useState('');\n  const [category,setCategory] = useState('');\n  const [time,setTime] = useState('');\n  const [expectedDate,setExpectedDate]=useState('');\n  const [pages,setPage]= useState('');\n  const [pricePerpage,setPricePerPag]= useState('');\n  const [totalAmountTobePaid,setAmountToBePaid]=useState('');\n  const [description,setDescription]=useState('');\n  const [workType,setWorktype] = useState('');\n  const [service,setService] = useState('');\n\n\n\n  const LoadCategories =async ()=>{\n    \n    const result = await ApiRequest.getCategories();\n  \n     setCategories(result.data);\n  //  setSelected(result.data)\n  }\n\n  useEffect(()=>{\n    LoadCategories();\n  },[]);\n\n  const HandleClose = () =>{\n    setShow(false);\n  }\n\n  const setPages=(page)=>{\n     var total = pricePerpage * page;\n     setAmountToBePaid(total);\n     setPage(page);\n\n  }\n  const setPricePerPage=(price)=>{\n     var total = price * pages;\n     setAmountToBePaid(total);\n     setPricePerPag(price);\n  }\n\n  const Update =()=>{\n    var number = prog;\n    var progs = parseInt(prog);\n    if(progs >= 100){\n      clearInterval(progress);\n      setTimeout(() => {\n        setShow(false);\n        swal(\"Upload Success\",\"file uploaded succesfully\",\"success\");\n      }, 1500);\n    };\n  \n    \n  \n  \n  \n  \n  number = number +10;\n    \n   setProg(number);\n  }\n\n  var progress = function(){ \n    setInterval(() => {\n    Update();\n}, 1500);\n  }\n const HandlePostTask=async ()=>{\n   \n   var check= FormValidation.postTaskForm(title,category,time,expectedDate,pages,pricePerpage,totalAmountTobePaid,description,service,workType);\n    \n   if(check == true){\n    if(validFiles.length !==0){\n        const result = await ApiRequest.postTask(title,category,time,expectedDate,pages,pricePerpage,totalAmountTobePaid,description,service,workType);\n\n        const {success,lastId}= result.data;\n         if(success == true){\n               \n  var number = 1;\n  var total = validFiles.length;\n\n \n//setShow(true);\nif(validFiles.length !==0){\n  setShow(true);\n  for (let index = 0; index <validFiles.length; index++) {\n    var newValue = Math.floor((number/total) * 100);\n    const element =validFiles[index];\n    const result = await ApiRequest.uploadFiles(lastId,element);\n    if(result == true){\n      setProg(newValue);\n      number = number + 1;\n     continue;\n   }\n    \n  }\n  setTimeout(()=>{\n     setValidFiles([]);\n     setTitle('');\n     setCategory('');\n     setTime('');\n    setExpectedDate('');\n    setPage('');\n    setPricePerPag('');\n    setAmountToBePaid('');\n    setDescription('');\n    setWorktype('');\n    setService('');\n    setShow(false);\n    setProg(0);\n    swal(\"success\",\"upload succesfull\",\"success\");\n  },1000);\n\n//progress();\n }else{\n  swal(\"Provide Files\",\"file uploaded Failed\",\"error\");\n }\n\n         }\n          }else{\n            swal(\"Provide Files\",\"file uploaded Failed\",\"error\");\n           }  //\n\n   }else{\n    swal(\"Submision Error\",check,\"error\");\n   }\n\n  /*\n  var number = 1;\n  var total = validFiles.length;\n\n \n//setShow(true);\nif(validFiles.length !==0){\n  setShow(true);\n  for (let index = 0; index <validFiles.length; index++) {\n    var newValue = Math.floor((number/total) * 100);\n    const element =validFiles[index];\n    const result = await ApiRequest.uploadFiles(1,element);\n    if(result == true){\n      setProg(newValue);\n      number = number + 1;\n     continue;\n   }\n    \n  }\n  setTimeout(()=>{\n    setShow(false);\n    setProg(0);\n    swal(\"success\",\"upload succesfull\",\"success\");\n  },1000);\n\n//progress();\n }else{\n  swal(\"Provide Files\",\"file uploaded Failed\",\"error\");\n }\n*/\n    \n   \n  }\n\n\n\n\n    return <>\n    <div  className=\"container card\">\n             <form style={{\n                    marginTop:\"30px\",\n                    marginBottom:\"30px\"\n             }}>\n  <div className=\"form-row\">\n    <div className=\"form-group col-md-6\">\n      <label for=\"inputEmail4\">Title</label>\n      <input value={title} type=\"text\" onChange={(e)=>setTitle(e.target.value)} className=\"form-control\" id=\"inputEmail4\" placeholder=\"Title\"/>\n    </div>\n    <div className=\"form-group col-md-6\">\n      <label for=\"inputPassword4\">Category</label>\n       <select onChange={(e)=>setCategory(e.target.value)} className=\"form-control\">\n           <option value=\"0\" selected>chose Category</option>\n           {categories.map((item)=>{\n           return <option>{item.category_name}</option>\n         })}\n       </select>\n    </div>\n  </div>\n \n  <div className=\"form-row\">\n    <div className=\"form-group col-md-6\">\n      <label for=\"inputCity\">Time</label>\n      <input type=\"time\" value={time} onChange={(e)=>setTime(e.target.value)} className=\"form-control\" id=\"inputCity\"/>\n    </div>\n    <div className=\"form-group col-md-4\">\n      <label for=\"inputState\">Expected date</label>\n        <input value={expectedDate} onChange={(e)=>setExpectedDate(e.target.value)} className=\"form-control\" type=\"date\"/>\n    </div>\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Pages</label>\n      <input type=\"number\" value={pages} onChange={(e)=>setPages(e.target.value)} className=\"form-control\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"pages\" />\n      \n    </div>\n\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Price (Ksh per page)</label>\n      <input type=\"number\" value={pricePerpage} onChange={(e)=>setPricePerPage(e.target.value)} className=\"form-control\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"price Ksh\" />\n      \n    </div>\n\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Total Ksh to Be Paid</label>\n      <input type=\"number\" value={totalAmountTobePaid} disabled className=\"form-control\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"price in dollars\" />\n      \n    </div>\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Work type</label>\n      <input type=\"text\" value={workType} onChange={(e)=>setWorktype(e.target.value)}  className=\"form-control\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"Work type\" />\n      \n    </div>\n    <div className=\"form-group col-md-2\">\n      <label for=\"inputZip\">Service</label>\n      <input type=\"text\" value={service} onChange={(e)=>setService(e.target.value)}  className=\"form-control\" min=\"0.00\" max=\"10000.00\" step=\"0.01\" placeholder=\"service\" />\n      \n    </div>\n  </div>\n\n  <div className=\"form-row\">\n  <div style={{display:\"block\"}} class=\"form-group col-md-12\">\n      <Dropzone validFiles={validFiles} setValidFiles={setValidFiles}/>\n</div>\n  </div>\n\n  <div className=\"form-row\">\n     <div className=\"form-group col-md-12\">\n     <label for=\"inputZip\">Descripe task Here(..Task Details)</label>\n   <CKEditor\n       \n       editor={ ClassicEditor }\n      // data={message}\n    \n       onReady={ editor => {\n           // You can store the \"editor\" and use when it is needed.\n           //console.log( 'Editor is ready to use!', editor );\n           editor.editing.view.change((writer) => {\n            writer.setStyle(\n                \"height\",\n                \"300px\",\n                editor.editing.view.document.getRoot()\n            );\n            });\n       } }\n       onChange={ ( event, editor ) => {\n           const data = editor.getData();\n           setDescription(data);\n           \n           //setMessage(data);\n       } }\n      \n   />\n     </div>\n  </div>\n  \n  <button onClick={()=>HandlePostTask()}  type=\"button\" className=\"btn btn-primary\">Post New Task</button>\n</form>\n</div>\n\n\n\n\n\n<Modal show={Show} onHide={HandleClose}>\n<Modal.Header>\n  <Modal.Title>Uploading Task</Modal.Title>\n</Modal.Header>\n<Modal.Body>\n<small>Upload Progress {prog}%</small>\n                      <div className=\"progress mb-3\" style={{height:\"15px\"}}>\n                        <div className=\"progress-bar bg-primary\" role=\"progressbar\" style={{width:prog+\"%\"}} aria-valuenow=\"72\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n</Modal.Body>\n\n</Modal>\n\n\n          </>;\n}\n\nexport default PostTask;"]},"metadata":{},"sourceType":"module"}