{"ast":null,"code":"import _toConsumableArray from \"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/tony/Documents/Projects/react/Writer/admin/src/views/base/Payments/pending/pendingPayments.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport ApiRequest from \"src/Api/Data/requestApi\";\nimport TableCard from \"src/views/table/TableCard\";\nimport SingeleTask from \"../../Task/TaskDetails/SingleTaskDetails\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar PendingPayments = function PendingPayments() {\n  _s();\n\n  var notify = function notify(data) {\n    return toast(data);\n  };\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isShowSingleTask = _useState2[0],\n      setIsShowSingleTask = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      taskId = _useState4[0],\n      setTaskId = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      markedOrders = _useState6[0],\n      setMarkedOrders = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      unpaidTask = _useState8[0],\n      setUnpaidTask = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isShowLoader = _useState10[0],\n      setShowLoader = _useState10[1];\n\n  var ShowSingleTasks = function ShowSingleTasks(taskid) {\n    setTaskId(taskid);\n    setIsShowSingleTask(true);\n  };\n\n  var CloseSingleTask = function CloseSingleTask() {\n    setTaskId(''); // setIsShowInvoice(false);\n\n    setIsShowSingleTask(false);\n  };\n\n  var SubmitMultipleMarked = function SubmitMultipleMarked() {\n    console.log(markedOrders);\n  };\n\n  var SubmitSingle = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id, invoice) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              /* let data = {\n                  invoice:invoice,\n                  taskId:id\n               }*/\n              setShowLoader(true);\n\n              if (!(id === \"\" || invoice === \"\")) {\n                _context.next = 4;\n                break;\n              }\n\n              notify('Failed');\n              return _context.abrupt(\"return\");\n\n            case 4:\n              _context.next = 6;\n              return ApiRequest.markTaskPaid(invoice, id);\n\n            case 6:\n              result = _context.sent;\n              notify(result.data);\n              setShowLoader(false); //console.log(data);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function SubmitSingle(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var HandleSelected = function HandleSelected(id, invoice, event) {\n    if (event.target.checked) {\n      var newMarked = _toConsumableArray(markedOrders);\n\n      newMarked.push({\n        invoice: invoice,\n        taskId: id\n      }); //[i][e.target.name] = e.target.value;\n\n      setMarkedOrders(newMarked);\n    } else {\n      var _newMarked = _toConsumableArray(markedOrders);\n\n      _newMarked = _newMarked.filter(function (item) {\n        return item.taskId !== id;\n      }); // newMarked.push({invoice:invoice,taskId:id})\n\n      setMarkedOrders(_newMarked);\n    }\n\n    ;\n  };\n\n  var Button = function Button(id, invoice) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          marginRight: \"5px\"\n        },\n        onClick: function onClick() {\n          return SubmitSingle(id, invoice);\n        },\n        className: \"btn btn-info\",\n        children: \"Mark Paid\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          color: \"#000\"\n        },\n        onClick: function onClick() {\n          return ShowSingleTasks(id);\n        },\n        className: \"btn btn-success fa fa-history\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true);\n  };\n\n  var getUnpaidTask = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var result, organisedData;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return ApiRequest.getPendingPayments();\n\n            case 2:\n              result = _context2.sent;\n              organisedData = [];\n              result.data.forEach(function (element) {\n                var data = {\n                  check: /*#__PURE__*/_jsxDEV(\"input\", {\n                    onChange: function onChange(e) {\n                      return HandleSelected(element.task_id, element.Invoice, e);\n                    },\n                    type: \"checkbox\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 80,\n                    columnNumber: 21\n                  }, _this),\n                  \"#taskId\": element.task_id,\n                  invoiceId: element.Invoice,\n                  email: element.writer_email,\n                  status: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"badge badge-warning\",\n                    children: element.payment_status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 84,\n                    columnNumber: 22\n                  }, _this),\n                  pdate: element.end_date,\n                  amount: \"Ksh \" + element.payment_expected_amount,\n                  Action: Button(element.task_id, element.Invoice)\n                };\n                organisedData.push(data);\n              });\n              setUnpaidTask(organisedData); //  organisedData=[];\n              // console.log(result);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getUnpaidTask() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getUnpaidTask();\n  }, []);\n  var columns = [{\n    dataField: \"check\",\n    text: /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"fa fa-check badge badge-success\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }, _this)\n  }, {\n    dataField: \"#taskId\",\n    text: \"#taskId\"\n  }, {\n    dataField: \"invoiceId\",\n    text: \"#Invoice Id\"\n  }, {\n    dataField: \"email\",\n    text: \"Writer email\"\n  }, {\n    dataField: \"status\",\n    text: \"status\"\n  }, {\n    dataField: \"pdate\",\n    text: \"Expected-Day-Pay\"\n  }, {\n    dataField: \"amount\",\n    text: \"Amount to be paid\"\n  }, {\n    dataField: \"Action\",\n    text: \"Action\"\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!isShowSingleTask && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: function onClick() {\n          return SubmitMultipleMarked();\n        },\n        style: {\n          float: \"right\",\n          marginBottom: \"5px\"\n        },\n        className: \"btn btn-warning\",\n        children: \"Submit All Selected As Paid\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container card\",\n        children: /*#__PURE__*/_jsxDEV(TableCard, {\n          products: unpaidTask,\n          columns: columns,\n          title: \"PENDING PAYMENTS\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 14\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 14\n      }, _this)]\n    }, void 0, true), isShowSingleTask && /*#__PURE__*/_jsxDEV(SingeleTask, {\n      id: taskId,\n      closeTask: CloseSingleTask,\n      isAccept: false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 34\n    }, _this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"block\",\n        cursor: \"pointer\",\n        zIndex: 99,\n        position: \"absolute\",\n        top: \"40%\",\n        left: '50%',\n        right: \"40%\"\n      },\n      children: isShowLoader && /*#__PURE__*/_jsxDEV(Loader, {\n        type: \"Circles\",\n        color: \"#00BFFF\",\n        height: 100,\n        width: 100\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 35\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(PendingPayments, \"uaMm7O5LKVCda7cxx4ZAnq1eBWs=\");\n\n_c = PendingPayments;\nexport default PendingPayments;\n\nvar _c;\n\n$RefreshReg$(_c, \"PendingPayments\");","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/admin/src/views/base/Payments/pending/pendingPayments.js"],"names":["useEffect","useState","Loader","toast","ToastContainer","ApiRequest","TableCard","SingeleTask","PendingPayments","notify","data","isShowSingleTask","setIsShowSingleTask","taskId","setTaskId","markedOrders","setMarkedOrders","unpaidTask","setUnpaidTask","isShowLoader","setShowLoader","ShowSingleTasks","taskid","CloseSingleTask","SubmitMultipleMarked","console","log","SubmitSingle","id","invoice","markTaskPaid","result","HandleSelected","event","target","checked","newMarked","push","filter","item","Button","marginRight","color","getUnpaidTask","getPendingPayments","organisedData","forEach","element","check","e","task_id","Invoice","invoiceId","email","writer_email","status","payment_status","pdate","end_date","amount","payment_expected_amount","Action","columns","dataField","text","float","marginBottom","display","cursor","zIndex","position","top","left","right"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport ApiRequest from \"src/Api/Data/requestApi\";\nimport TableCard from \"src/views/table/TableCard\";\nimport SingeleTask from \"../../Task/TaskDetails/SingleTaskDetails\";\n\nconst PendingPayments= ()=>{\n\n  const notify = (data) => toast(data);\n  const [isShowSingleTask,setIsShowSingleTask]=useState(false);\n  const [taskId,setTaskId]=useState('');\n  const [markedOrders,setMarkedOrders] = useState([]);\n  const [unpaidTask,setUnpaidTask] = useState([]);\n  const [isShowLoader,setShowLoader] = useState(false);\n\n  const ShowSingleTasks =taskid=>{\n    setTaskId(taskid);\n  \n   setIsShowSingleTask(true);\n  }\n  const CloseSingleTask=()=>{\n    setTaskId('');\n    // setIsShowInvoice(false);\n     setIsShowSingleTask(false);\n  }\n  const SubmitMultipleMarked = ()=>{\n    console.log(markedOrders)\n  }\n\n  const SubmitSingle=async (id,invoice)=>{\n     /* let data = {\n         invoice:invoice,\n         taskId:id\n      }*/\n      setShowLoader(true);\n   if(id === \"\" || invoice === \"\"){\n      notify('Failed')\n     return\n   }\n    \n      const result = await ApiRequest.markTaskPaid(invoice,id);\n      notify(result.data);\n      setShowLoader(false);\n      //console.log(data);\n  }\n  const HandleSelected =(id,invoice,event)=>{\n      if(event.target.checked){\n        let newMarked = [...markedOrders];\n        newMarked.push({invoice:invoice,taskId:id})\n        //[i][e.target.name] = e.target.value;\n       setMarkedOrders(newMarked);\n\n       \n      }else {\n        let newMarked = [...markedOrders];\n       newMarked= newMarked.filter((item)=>item.taskId !== id);\n       // newMarked.push({invoice:invoice,taskId:id})\n       setMarkedOrders(newMarked);\n        \n      };\n  }\n\n  const Button=(id,invoice)=>{\n    return <>\n        <button style={{marginRight:\"5px\"}} onClick={()=>SubmitSingle(id,invoice)} className=\"btn btn-info\">Mark Paid</button>\n    <button style={{\n             \n              color:\"#000\",\n            \n  }} onClick={()=>ShowSingleTasks(id)} className=\"btn btn-success fa fa-history\"></button>\n  </>\n  }\n\n const getUnpaidTask = async ()=>{\n        const result = await ApiRequest.getPendingPayments();\n        const organisedData=[];\n        result.data.forEach(element => {\n            var data={\n              check:<input onChange={(e)=>HandleSelected(element.task_id,element.Invoice,e)} type=\"checkbox\"/>,\n              \"#taskId\":element.task_id,\n              invoiceId:element.Invoice,\n              email:element.writer_email,\n              status:<span className=\"badge badge-warning\">{element.payment_status}</span>,\n              pdate:element.end_date,\n              amount:\"Ksh \"+element.payment_expected_amount,\n              Action:Button(element.task_id,element.Invoice)\n             }\n\n             organisedData.push(data);\n             \n        });\n\n        setUnpaidTask(organisedData);\n\n      //  organisedData=[];\n       // console.log(result);\n } \n\n useEffect(()=>{\n     getUnpaidTask();\n },[]);\n    const columns = [\n      {\n        dataField: \"check\",\n        text: <span className=\"fa fa-check badge badge-success\"></span>,\n       \n      },\n        {\n          dataField: \"#taskId\",\n          text: \"#taskId\",\n         \n        },\n      \n        {\n          dataField: \"invoiceId\",\n          text: \"#Invoice Id\",\n       \n        },\n        {\n          dataField: \"email\",\n          text: \"Writer email\",\n        \n        },\n        {\n          \n            dataField: \"status\",\n            text: \"status\",\n          \n          \n        },\n       \n        {\n          \n          dataField: \"pdate\",\n          text: \"Expected-Day-Pay\",\n        },\n        {\n          \n          dataField: \"amount\",\n          text: \"Amount to be paid\",\n        },\n        {\n            dataField: \"Action\",\n            text: \"Action\",\n         \n          }\n      ];\n  \n    return <>\n            {!isShowSingleTask &&<>\n            <button onClick={()=>SubmitMultipleMarked()} style={{float:\"right\",marginBottom:\"5px\"}} className=\"btn btn-warning\">Submit All Selected As Paid</button>\n             <div className=\"container card\">\n              \n             <TableCard \n             products={unpaidTask}\n             columns={columns}\n              title={\"PENDING PAYMENTS\"}\n             />\n             </div></>}\n\n            {isShowSingleTask && <SingeleTask id={taskId} closeTask={CloseSingleTask} isAccept={false}/>}\n\n            <ToastContainer />\n            <div style={{\n                  display:\"block\",\n                  cursor:\"pointer\",\n                   zIndex:99,\n                  position:\"absolute\",\n                  top:\"40%\",\n                  left:'50%',\n                  right:\"40%\",\n                  \n             }}>\n               \n                 \n                {isShowLoader &&  <Loader\n                   type=\"Circles\"\n                   color=\"#00BFFF\"\n                    height={100}\n                    width={100}\n      \n                  />}\n               \n             </div>\n          </>\n          \n}\nexport default PendingPayments;"]},"metadata":{},"sourceType":"module"}