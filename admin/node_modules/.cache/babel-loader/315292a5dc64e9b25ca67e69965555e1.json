{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import Axios from\"./config\";function UpdateToken(_x){return _UpdateToken.apply(this,arguments);}function _UpdateToken(){_UpdateToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(refreshToken){var endPoint,result,_result$data$tokens,accessToken,_refreshToken,ta,tr;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;endPoint='refreshToken?refreshToken='+refreshToken;_context.next=4;return Axios.post(endPoint);case 4:result=_context.sent;if(!(result.data==false)){_context.next=9;break;}window.location.href=\"/#/login\";_context.next=16;break;case 9:if(!(result.data.type===\"super\")){_context.next=16;break;}_result$data$tokens=result.data.tokens,accessToken=_result$data$tokens.accessToken,_refreshToken=_result$data$tokens.refreshToken;ta=accessToken;tr=_refreshToken;localStorage.setItem('ta',ta);localStorage.setItem('tr',tr);return _context.abrupt(\"return\",true);case 16:_context.next=20;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,18]]);}));return _UpdateToken.apply(this,arguments);}function requestRefreshToken(_x2,_x3){return _requestRefreshToken.apply(this,arguments);}/*async function verifyAccessToken(accessToken,Profile){\n\n   try {\n          \n           const endPoint ='veryAccessToken?accessToken='+accessToken;\n           const result = await Axios.post(endPoint);\n           console.log(result)\n\n           if(result.data.success !==undefined && result.data.success == true){\n            if(result.data.type === \"super\"){\n          \n              const { accessToken,refreshToken } = result.data.tokens;\n                \n              const ta=accessToken;\n              const tr=refreshToken;\n             // console.log(result.data.tokens);\n              \n              localStorage.setItem('ta',ta);\n              localStorage.setItem('tr',tr);\n  \n  \n              Profile(result.data.data);\n               return result.data.success;\n            }\n          }else{ return false;}\n\n\n          \n   } catch (error) {\n         console.log(error)\n  }\n\n}*/function _requestRefreshToken(){_requestRefreshToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(refreshToken,Profile){var endPoint,result,_result$data$tokens2,accessToken,_refreshToken2,ta,tr;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;endPoint='refreshToken?refreshToken='+refreshToken;_context2.next=4;return Axios.post(endPoint);case 4:result=_context2.sent;if(!(result.data==false)){_context2.next=9;break;}window.location.href=\"/#/login\";_context2.next=17;break;case 9:if(!(result.data.type===\"super\")){_context2.next=17;break;}_result$data$tokens2=result.data.tokens,accessToken=_result$data$tokens2.accessToken,_refreshToken2=_result$data$tokens2.refreshToken;ta=accessToken;tr=_refreshToken2;localStorage.setItem('ta',ta);localStorage.setItem('tr',tr);// localStorage.setItem('gh',tr);\nProfile(result.data.data);return _context2.abrupt(\"return\",true);case 17:_context2.next=21;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](0);case 21:case\"end\":return _context2.stop();}}},_callee2,null,[[0,19]]);}));return _requestRefreshToken.apply(this,arguments);}function veryAccessTokens(_x4,_x5){return _veryAccessTokens.apply(this,arguments);}function _veryAccessTokens(){_veryAccessTokens=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(accessToken,Profile){var endPoint,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;endPoint='veryAccessToken?accessToken='+accessToken;_context3.next=4;return Axios.post(endPoint);case 4:result=_context3.sent;if(!(result.data.success!==undefined&&result.data.success==true)){_context3.next=11;break;}if(!(result.data.user.type===\"super\")){_context3.next=9;break;}Profile(result.data.user);return _context3.abrupt(\"return\",result.data.user);case 9:_context3.next=12;break;case 11:return _context3.abrupt(\"return\",false);case 12:_context3.next=16;break;case 14:_context3.prev=14;_context3.t0=_context3[\"catch\"](0);case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[0,14]]);}));return _veryAccessTokens.apply(this,arguments);}var Tokens=function Tokens(){var accessToken=localStorage.getItem('ta');var refreshToken=localStorage.getItem('tr');return{accessToken:accessToken,refreshToken:refreshToken};};export{requestRefreshToken,Tokens,veryAccessTokens,UpdateToken};","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/admin/src/Api/authThenticateToken.js"],"names":["Axios","UpdateToken","refreshToken","endPoint","post","result","data","window","location","href","type","tokens","accessToken","ta","tr","localStorage","setItem","requestRefreshToken","Profile","veryAccessTokens","success","undefined","user","Tokens","getItem"],"mappings":"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","sourcesContent":["import Axios from \"./config\";\nasync function UpdateToken(refreshToken){\n    try {\n        const endPoint ='refreshToken?refreshToken='+refreshToken;\n       \n        const result = await Axios.post(endPoint);\n        \n        if(result.data == false){\n          \n         window.location.href=\"/#/login\";\n        }else{\n           \n            if(result.data.type === \"super\" ){\n                \n                const { accessToken,refreshToken } = result.data.tokens;\n                \n                const ta=accessToken;\n                const tr=refreshToken;\n                \n                \n                localStorage.setItem('ta',ta);\n                localStorage.setItem('tr',tr);\n               \n                return true;\n            }\n            //console.log(result.data)\n            \n        }\n    } catch (error) {\n        //console.log(error);\n    } \n}\n\nasync function requestRefreshToken(refreshToken,Profile){\n    try {\n        const endPoint ='refreshToken?refreshToken='+refreshToken;\n       \n        const result = await Axios.post(endPoint);\n        \n        if(result.data == false){\n          \n         window.location.href=\"/#/login\";\n        }else{\n           \n            if(result.data.type === \"super\" ){\n                \n                const { accessToken,refreshToken } = result.data.tokens;\n                \n                const ta=accessToken;\n                const tr=refreshToken;\n                \n                \n                localStorage.setItem('ta',ta);\n                localStorage.setItem('tr',tr);\n               // localStorage.setItem('gh',tr);\n               \n                Profile(result.data.data);\n                return true;\n            }\n            //console.log(result.data)\n            \n        }\n    } catch (error) {\n       // console.log(error);\n    }\n   \n}\n/*async function verifyAccessToken(accessToken,Profile){\n\n   try {\n          \n           const endPoint ='veryAccessToken?accessToken='+accessToken;\n           const result = await Axios.post(endPoint);\n           console.log(result)\n\n           if(result.data.success !==undefined && result.data.success == true){\n            if(result.data.type === \"super\"){\n          \n              const { accessToken,refreshToken } = result.data.tokens;\n                \n              const ta=accessToken;\n              const tr=refreshToken;\n             // console.log(result.data.tokens);\n              \n              localStorage.setItem('ta',ta);\n              localStorage.setItem('tr',tr);\n  \n  \n              Profile(result.data.data);\n               return result.data.success;\n            }\n          }else{ return false;}\n\n\n          \n   } catch (error) {\n         console.log(error)\n  }\n\n}*/\n\nasync function veryAccessTokens(accessToken,Profile){\n    try {\n          \n        const endPoint ='veryAccessToken?accessToken='+accessToken;\n        const result = await Axios.post(endPoint);\n      //  console.log(result)\n\n        if(result.data.success !==undefined && result.data.success == true){\n         if(result.data.user.type === \"super\"){\n           \n           \n\n\n            Profile(result.data.user);\n            return result.data.user;\n         }\n       }else{ return false;}\n\n\n       \n} catch (error) {\n     // console.log(error)\n}\n}\n\n\n\nconst Tokens = function(){\n    const accessToken = localStorage.getItem('ta');\n    const refreshToken = localStorage.getItem('tr');\n\n    \n\n    return {accessToken,refreshToken};\n}\n\nexport {requestRefreshToken,Tokens,veryAccessTokens,UpdateToken}"]},"metadata":{},"sourceType":"module"}