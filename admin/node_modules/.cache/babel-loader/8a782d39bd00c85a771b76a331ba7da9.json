{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Axios from \"../config\";\n\nfunction validateEmail(email) {\n  var re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nfunction validateLogin(email, password) {\n  if (email !== \"\") {\n    if (validateEmail(email)) {\n      if (password !== \"\") {\n        return true;\n      } else {\n        return \"password is required\";\n      }\n    } else {\n      return \"wrong email format\";\n    }\n  } else {\n    return \"email is required\";\n  }\n}\n\nvar Loginn = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(email, password, Profile) {\n    var res, data, endPoint, result, _result$data$tokens, accessToken, refreshToken, ta, tr;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            res = validateLogin(email, password);\n\n            if (!(res == true)) {\n              _context.next = 22;\n              break;\n            }\n\n            data = \"password=\" + password + \"&email=\" + email;\n            endPoint = \"Login/admin?\".concat(data); // console.log(endPoint)\n\n            _context.next = 7;\n            return Axios.post(endPoint);\n\n          case 7:\n            result = _context.sent;\n\n            if (!(result.data.success !== undefined && result.data.success == true)) {\n              _context.next = 19;\n              break;\n            }\n\n            if (!(result.data.type === \"super\")) {\n              _context.next = 17;\n              break;\n            }\n\n            _result$data$tokens = result.data.tokens, accessToken = _result$data$tokens.accessToken, refreshToken = _result$data$tokens.refreshToken;\n            ta = accessToken;\n            tr = refreshToken;\n            localStorage.setItem('ta', ta);\n            localStorage.setItem('tr', tr); //localStorage.setItem('if',JSON.stringify(result.data.data));\n\n            Profile(result.data.data);\n            return _context.abrupt(\"return\", result.data.success);\n\n          case 17:\n            _context.next = 20;\n            break;\n\n          case 19:\n            return _context.abrupt(\"return\", result.data);\n\n          case 20:\n            _context.next = 23;\n            break;\n\n          case 22:\n            return _context.abrupt(\"return\", res);\n\n          case 23:\n            _context.next = 28;\n            break;\n\n          case 25:\n            _context.prev = 25;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 28:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 25]]);\n  }));\n\n  return function Loginn(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n_c = Loginn;\n\nvar Activate = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(Key) {\n    var key, endPoint, result;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            key = parseInt(Key);\n            endPoint = \"/admin/api/c2/activate/\".concat(key);\n            _context2.next = 4;\n            return Axios.post(endPoint);\n\n          case 4:\n            result = _context2.sent;\n            return _context2.abrupt(\"return\", result.data);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function Activate(_x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n_c2 = Activate;\n\nvar Logout = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var accessToken, refreshToken, endPoint, result;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            accessToken = localStorage.getItem('ta');\n            refreshToken = localStorage.getItem('tr');\n            endPoint = \"Logout/\".concat(refreshToken);\n            _context3.next = 5;\n            return Axios.post(endPoint);\n\n          case 5:\n            result = _context3.sent;\n\n            if (result.data == true) {\n              localStorage.clear();\n              window.location.reload();\n            } //  localStorage.setItem('ta',ta);\n            // localStorage.setItem('tr',tr);\n\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function Logout() {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\n_c3 = Logout;\nexport { Loginn, Logout, Activate };\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Loginn\");\n$RefreshReg$(_c2, \"Activate\");\n$RefreshReg$(_c3, \"Logout\");","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/admin/src/Api/auth/auth.js"],"names":["Axios","validateEmail","email","re","test","String","toLowerCase","validateLogin","password","Loginn","Profile","res","data","endPoint","post","result","success","undefined","type","tokens","accessToken","refreshToken","ta","tr","localStorage","setItem","console","log","Activate","Key","key","parseInt","Logout","getItem","clear","window","location","reload"],"mappings":"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","sourcesContent":["import Axios from \"../config\";\n\nfunction validateEmail(email){\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n}\nfunction validateLogin (email,password){\n    if(email !==\"\"){\n        if(validateEmail(email)){\n            if(password !==\"\"){\n                  return true;\n            }else{return \"password is required\"}\n        }else{ return \"wrong email format\"}\n    }else{ return \"email is required\"}\n }\n\n const Loginn = async (email,password,Profile)=>{\n    try {\n         var res = validateLogin(email,password);\n         if(res == true){\n            var data = \"password=\"+password+\"&email=\"+email\n        const endPoint =`Login/admin?${data}`;\n\n       // console.log(endPoint)\n       \n       const result = await Axios.post(endPoint);\n       \n       if(result.data.success !==undefined && result.data.success == true){\n          if(result.data.type === \"super\"){\n              \n            const { accessToken,refreshToken } = result.data.tokens;\n            \n            const ta=accessToken;\n            const tr=refreshToken;\n            \n            localStorage.setItem('ta',ta);\n            localStorage.setItem('tr',tr);\n            //localStorage.setItem('if',JSON.stringify(result.data.data));\n\n\n            Profile(result.data.data);\n            return(result.data.success);\n            //window.location.href=\"/#/home\";\n\n          }\n        }else{ return result.data;}\n      \n                  // return false;\n       // return result.data;\n        }else{\n            return res;\n        }\n   } catch (error) {\n         console.log(error)\n   }\n}\n\nconst Activate = async (Key)=>{\n    const key = parseInt(Key);\n   \n\n    const endPoint =`/admin/api/c2/activate/${key}`;\n\n    const result = await Axios.post(endPoint);\n   \n    return result.data;\n\n}\n\nconst Logout = async ()=>{\n    const accessToken = localStorage.getItem('ta');\n    const refreshToken = localStorage.getItem('tr');\n\n     const endPoint = `Logout/${refreshToken}`;\n\n     const result = await Axios.post(endPoint);\n      \n     if(result.data == true){\n        \n         localStorage.clear();\n         window.location.reload();\n     }\n  //  localStorage.setItem('ta',ta);\n   // localStorage.setItem('tr',tr);\n}\n\nexport {\n    Loginn,\n    Logout,\n    Activate\n}"]},"metadata":{},"sourceType":"module"}