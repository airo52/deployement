{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import ApiRequest from\"src/Api/Data/requestApi\";import ChatBox from\"../ChatBox/ChatBox\";import TableCard from\"../table/TableCard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Support=function Support(_ref){var socket=_ref.socket;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),TICKETS=_useState4[0],setTickects=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),taskid=_useState8[0],setTaskid=_useState8[1];var getOpentickets=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,organisedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return ApiRequest.getOpenTickets();case 3:result=_context.sent;organisedData=[];result.data.forEach(function(element){var dat={\"#Id\":element.task_id,image:ProfileImage(element.writer_profile),email:element.writer_email,Odate:element.taskl_accepted_date,Action:Buttons(element.writer_email,element.task_id)};organisedData.push(dat);});setTickects(organisedData);_context.next=11;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function getOpentickets(){return _ref2.apply(this,arguments);};}();useEffect(function(){getOpentickets();},[]);var Open=function Open(mail,taskid){setTaskid(taskid);setEmail(mail);setOpen(!open);};var ProfileImage=function ProfileImage(image){return/*#__PURE__*/_jsx(\"img\",{style:{width:\"30px\",height:\"30px\",borderRadius:'15px'},src:image,alt:\"profile\"});};var Buttons=function Buttons(email,task_id){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{style:{color:\"blue\"},onClick:function onClick(){return Open(email,task_id);},className:\"fa fa-reply btn\"})});};var columns=[{dataField:\"#Id\",text:\"TicketId(taskid)\"},{dataField:\"image\",text:\"Profile\",sort:true},{dataField:\"email\",text:\"email\"},{dataField:\"Odate\",text:\"OpenDate\"},{dataField:\"Action\",text:\"Action\"}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container card\",children:/*#__PURE__*/_jsx(TableCard,{products:TICKETS,columns:columns,title:\"SUPPORT TICKETS\"})}),open&&/*#__PURE__*/_jsx(ChatBox,{open:open,SetOpen:Open,email:email,socket:socket,taskid:taskid})]});};export default Support;","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/admin/src/views/supportCenter/support.js"],"names":["useEffect","useState","ApiRequest","ChatBox","TableCard","Support","socket","open","setOpen","TICKETS","setTickects","email","setEmail","taskid","setTaskid","getOpentickets","getOpenTickets","result","organisedData","data","forEach","element","dat","task_id","image","ProfileImage","writer_profile","writer_email","Odate","taskl_accepted_date","Action","Buttons","push","Open","mail","width","height","borderRadius","color","columns","dataField","text","sort"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport ApiRequest from \"src/Api/Data/requestApi\";\n\nimport ChatBox from \"../ChatBox/ChatBox\";\nimport TableCard from \"../table/TableCard\";\n\nconst Support = ({socket})=>{\n\n   const [open,setOpen]=useState(false);\n\n   const [TICKETS,setTickects] = useState([]);\n   const [email,setEmail] = useState('');\n  const [taskid,setTaskid] =useState('');\n\n    const getOpentickets = async ()=>{\n            try {\n              \n              const result = await ApiRequest.getOpenTickets();\n              var organisedData =[];\n              result.data.forEach(element => {\n              var dat=  {\n\n                  \"#Id\":element.task_id,\n                   image:ProfileImage(element.writer_profile),\n                  \n                   email:element.writer_email,\n                   \n                   Odate:element.taskl_accepted_date,\n                   Action:Buttons(element.writer_email,element.task_id)\n                }\n                organisedData.push(dat);\n              });\n\n              setTickects(organisedData);\n            } catch (error) {\n              \n            \n            }\n    }\n\n    useEffect(()=>{\n      getOpentickets();\n    },[]);\n\n    const Open=(mail,taskid)=>{\n      setTaskid(taskid);\n      setEmail(mail);\n      setOpen(!open);\n   }\n   const ProfileImage=image=>{\n    \n      return <img \n              style={{\n                width:\"30px\",\n                height:\"30px\",\n                borderRadius:'15px'\n                \n              }}\n          src={image} alt=\"profile\"/>\n    }\n   \n    const Buttons =(email,task_id)=>{\n      return <> \n           <button style={{color:\"blue\"}} onClick={()=>Open(email,task_id)}  className=\"fa fa-reply btn\"></button> \n         \n           \n       </>\n         }\n\n       \n   \n   const columns = [\n        {\n          dataField: \"#Id\",\n          text: \"TicketId(taskid)\",\n         \n        },\n        {\n          dataField: \"image\",\n          text: \"Profile\",\n        \n          sort: true\n        },\n       \n        {\n          dataField: \"email\",\n          text: \"email\",\n        \n        },\n       \n        {\n          \n            dataField: \"Odate\",\n            text: \"OpenDate\",\n          \n          \n        },\n        {\n            dataField: \"Action\",\n            text: \"Action\",\n         \n          }\n      ];\n    \n return <>  \n<div className=\"container card\">\n<TableCard products={TICKETS} columns={columns} title={\"SUPPORT TICKETS\"}/>\n</div>\n     \n{open && <ChatBox\n    open={open}\n    SetOpen={Open}\n    email={email}\n    socket={socket}\n    taskid={taskid}\n   />}\n   </>;\n}\n\nexport default Support;"]},"metadata":{},"sourceType":"module"}