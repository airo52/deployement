{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/tony/Documents/Projects/react/Writer/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import ApiRequest from\"src/Api/Data/requestApi\";import ChatBox from\"src/views/ChatBox/ChatBox\";import TableCard from\"src/views/table/TableCard\";import swal from\"sweetalert\";import SingeleTask from\"../../TaskDetails/SingleTaskDetails\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TaskInProgress=function TaskInProgress(_ref){var socket=_ref.socket;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),taskDetails=_useState4[0],setTaskDetails=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),taskId=_useState6[0],setTaskId=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),Items=_useState8[0],setItems=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),checkSEnt=_useState10[0],setSent=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),email=_useState12[0],setEmail=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),taskid=_useState14[0],setTaskid=_useState14[1];var GetTableData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,sortedItems;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(checkSEnt){_context.next=8;break;}_context.next=3;return ApiRequest.getOrdersInProgress();case 3:result=_context.sent;// console.log(result);\nsortedItems=[];result.data.forEach(function(element){var data={\"#taskId\":element.task_id,title:element.task_title,writerName:element.writer_display_name,email:element.writer_email,status:element.task_status,category:element.writer_category,Adate:element.taskl_accepted_date,ddate:element.task_deadline,Action:Buttons(element.writer_email,element.task_id)};sortedItems.push(data);});setSent(true);setItems(sortedItems);case 8:case\"end\":return _context.stop();}}},_callee);}));return function GetTableData(){return _ref2.apply(this,arguments);};}();useEffect(function(){//console.log(socket);\n// socket.emit('joins',{name:\"bb\",room:\"bbb\"}, () =>{\n//});\nGetTableData();},[]);var Open=function Open(mail,taskid){setEmail(mail);setTaskid(taskid);setOpen(!open);};var CloseTask=function CloseTask(){setTaskDetails(false);};var TaskDetails=function TaskDetails(taskId){setTaskId(taskId);setTaskDetails(true);};var Cancel=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(taskId){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return ApiRequest.CancellOrder(taskId);case 2:result=_context2.sent;console.log(result.data);if(result.data==\"done\"){GetTableData();swal(\"Order Cancelled\",\"succesfully\",\"success\");}else{swal(\"Error\",\"Cancelletion Failed\",\"error\");}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function Cancel(_x){return _ref3.apply(this,arguments);};}();var CancelOrder=function CancelOrder(orderId){swal(\"YOU ARE ABOUT TO CANCEL ONGOING ORDER\",{buttons:{cancel:\"NO\",yes:{text:\"YES\",value:\"yes\"}}}).then(function(value){switch(value){case'yes':Cancel(orderId);///  swal(\"Order Cancelled\",\"succesfully\",\"success\");\nbreak;default:break;}});};var columns=[{dataField:\"#taskId\",text:\"#taskId\"},{dataField:\"title\",text:\"Title\",sort:true},{dataField:\"writerName\",text:\"Writer Username\"},{dataField:\"email\",text:\"email\"},{dataField:\"status\",text:\"status\"},{dataField:\"category\",text:\"Category\"},{dataField:\"Adate\",text:\"Accepted-Date\"},{dataField:\"ddate\",text:\"Deadline\"},{dataField:\"Action\",text:\"Action\"}];var Buttons=function Buttons(mail,taskid){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return Open(mail,taskid);},style:{marginRight:\"3px\"},className:\"btn btn-primary fa fa-comment\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return CancelOrder(taskid);},style:{marginRight:\"3px\"},className:\"btn btn-warning\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return TaskDetails(taskid);},className:\"btn btn-info\",children:\"Details\"})]});};return/*#__PURE__*/_jsxs(_Fragment,{children:[!taskDetails&&/*#__PURE__*/_jsxs(_Fragment,{children:[\" \",/*#__PURE__*/_jsx(TableCard,{products:Items,columns:columns,title:\"ORDERS-IN-PROGRESS\"}),open&&/*#__PURE__*/_jsx(ChatBox,{open:open,SetOpen:Open,email:email,socket:socket,taskid:taskid})]}),taskDetails&&/*#__PURE__*/_jsx(SingeleTask,{id:taskId,closeTask:CloseTask,isAccept:false})]});};export default TaskInProgress;","map":{"version":3,"sources":["/Users/tony/Documents/Projects/react/Writer/admin/src/views/base/Task/management/in-progress/progress.js"],"names":["useEffect","useState","ApiRequest","ChatBox","TableCard","swal","SingeleTask","TaskInProgress","socket","open","setOpen","taskDetails","setTaskDetails","taskId","setTaskId","Items","setItems","checkSEnt","setSent","email","setEmail","taskid","setTaskid","GetTableData","getOrdersInProgress","result","sortedItems","data","forEach","element","task_id","title","task_title","writerName","writer_display_name","writer_email","status","task_status","category","writer_category","Adate","taskl_accepted_date","ddate","task_deadline","Action","Buttons","push","Open","mail","CloseTask","TaskDetails","Cancel","CancellOrder","console","log","CancelOrder","orderId","buttons","cancel","yes","text","value","then","columns","dataField","sort","marginRight"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport ApiRequest from \"src/Api/Data/requestApi\";\nimport ChatBox from \"src/views/ChatBox/ChatBox\";\nimport TableCard from \"src/views/table/TableCard\";\nimport swal from \"sweetalert\";\nimport SingeleTask from \"../../TaskDetails/SingleTaskDetails\";\n\nconst TaskInProgress=({socket})=>{\n      \n  const [open,setOpen]=useState(false);\n  const [taskDetails,setTaskDetails] = useState(false);\n  const [taskId,setTaskId]=useState('');\n  const [Items,setItems]= useState([]);\n  const [checkSEnt,setSent] = useState(false);\n  const [email,setEmail] = useState('');\n  const [taskid,setTaskid] =useState('');\n\nconst GetTableData=async ()=>{\n  if(!checkSEnt){\n      const result = await ApiRequest.getOrdersInProgress();\n     // console.log(result);\n       \n      var sortedItems = [];\n    result.data.forEach(element => {\n          var data ={\n            \"#taskId\":element.task_id,\n            title:element.task_title,\n            writerName:element.writer_display_name,\n            email:element.writer_email,\n            status:element.task_status,\n            category:element.writer_category,\n            Adate:element.taskl_accepted_date,\n            ddate:element.task_deadline,\n            Action:Buttons(element.writer_email,element.task_id)\n          }\n          sortedItems.push(data);\n\n    });\n    setSent(true);\n    setItems(sortedItems);\n  }\n  \n}\n\n\n  useEffect(()=>{\n//console.log(socket);\n   // socket.emit('joins',{name:\"bb\",room:\"bbb\"}, () =>{\n    //});\n      GetTableData();\n  },[]);\n\n  const Open=(mail,taskid)=>{\n    setEmail(mail);\n    setTaskid(taskid);\n\n     setOpen(!open);\n  }\n  const CloseTask=()=>{\n    setTaskDetails(false);\n  }\n\n  const TaskDetails=(taskId)=>{\n    setTaskId(taskId);\n     setTaskDetails(true);\n  }\n\n  const Cancel =async (taskId)=>{\n    const result = await ApiRequest.CancellOrder(taskId);\n     console.log(result.data)\n    if(result.data == \"done\"){\n      GetTableData();\n      swal(\"Order Cancelled\",\"succesfully\",\"success\");\n    }else{\n      swal(\"Error\",\"Cancelletion Failed\",\"error\");\n    }\n\n  }\n\n  const CancelOrder=(orderId)=>{\n    swal(\"YOU ARE ABOUT TO CANCEL ONGOING ORDER\",{\n       buttons:{\n         cancel:\"NO\",\n         yes:{\n           text:\"YES\",\n           value:\"yes\"\n         }\n       }\n    })\n    .then((value)=>{\n          switch (value) {\n            case 'yes':\n                Cancel(orderId);\n                ///  swal(\"Order Cancelled\",\"succesfully\",\"success\");\n              break;\n          \n            default:\n\n              break;\n          }\n    })\n  }\n\n     const columns = [\n        {\n          dataField: \"#taskId\",\n          text: \"#taskId\",\n         \n        },\n        {\n          dataField: \"title\",\n          text: \"Title\",\n        \n          sort: true\n        },\n        {\n          dataField: \"writerName\",\n          text: \"Writer Username\",\n       \n        },\n        {\n          dataField: \"email\",\n          text: \"email\",\n        \n        },\n        {\n          \n            dataField: \"status\",\n            text: \"status\",\n          \n          \n        },\n        {\n          \n            dataField: \"category\",\n            text: \"Category\",\n          \n          \n        },\n        {\n          \n          dataField: \"Adate\",\n          text: \"Accepted-Date\",\n        \n        \n      },\n      {\n          \n        dataField: \"ddate\",\n        text: \"Deadline\",\n      \n      \n      },\n        {\n            dataField: \"Action\",\n            text: \"Action\",\n         \n          }\n      ];\n\n      const Buttons = (mail,taskid)=>{\n             return <>\n                   <button onClick={()=>Open(mail,taskid)} style={{marginRight:\"3px\"}} className=\"btn btn-primary fa fa-comment\"></button>\n                   <button onClick={()=>CancelOrder(taskid)}  style={{marginRight:\"3px\"}} className=\"btn btn-warning\">Cancel</button>\n                   <button onClick={()=>TaskDetails(taskid)} className=\"btn btn-info\">Details</button>\n                   </>\n      }\n     \n    return <>\n            {!taskDetails && <> <TableCard \n             products={Items}\n             columns={columns}\n              title={\"ORDERS-IN-PROGRESS\"}\n             />\n             {open && <ChatBox\n    open={open}\n    SetOpen={Open}\n    email={email}\n    socket={socket}\n    taskid={taskid}\n   />}\n             </>\n             }\n             {taskDetails &&<SingeleTask id={taskId} closeTask={CloseTask} isAccept={false}/>}\n          </>\n          \n}\n\nexport default TaskInProgress;"]},"metadata":{},"sourceType":"module"}